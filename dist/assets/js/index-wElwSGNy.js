import{u as M}from"./cart-D-r6EA5f.js";import{d as $,a as T,o as D,y as N,f as d,g as o,h as e,z as E,i as c,t as u,_ as h,A as Y,k as j,e as L,l as Q,m as A,p as Z,r as _,v as k,u as w,F as q,j as O}from"./index-h8EpgnIO.js";const F={class:"cart-item"},S={class:"item-image"},W={class:"image-container"},R=["alt"],z={key:0,class:"loading-placeholder"},B={class:"item-details"},G={class:"item-name"},U={key:0,class:"item-category"},V={class:"item-price"},H={class:"quantity-control"},X=["disabled"],J=["value","max"],K=["disabled"],P={class:"item-total"},tt={class:"total-price"},et=$({__name:"CartItem",props:{item:{},index:{}},emits:["increase-quantity","decrease-quantity","remove-item","update-quantity"],setup(a){const t=T({}),i={vegetables:"è”¬èœ",fruits:"æ°´æžœ",grains:"è°·ç‰©",eggs:"è›‹ç±»"},v=s=>i[s]||s,f=s=>{t[s]=!0},y=s=>s?s.startsWith("http")||s.startsWith("//")?s:s.startsWith("/")?`.${s}`:s.includes("/")?s.startsWith("list-")?`./images/${s}`:`./${s}`:`./images/${s}`:"./images/cx.svg",m=s=>{const l=s.target;l.src="./images/cx.svg";const C=Object.keys(t).find(g=>t[Number(g)]===!1);C&&(t[Number(C)]=!0)};return D(()=>{}),(s,l)=>{const C=N("lazy");return o(),d("div",F,[e("div",S,[e("div",W,[E(e("img",{alt:a.item.name,onLoad:l[0]||(l[0]=g=>f(a.item.id)),onError:m,style:{width:"100%",height:"auto",opacity:"1",transition:"opacity 0.3s"}},null,40,R),[[C,y(a.item.picture)]]),t[a.item.id]?c("",!0):(o(),d("div",z))])]),e("div",B,[e("h3",G,u(a.item.name),1),a.item.category?(o(),d("p",U,"åˆ†ç±»: "+u(v(a.item.category)),1)):c("",!0),e("p",V,"å•ä»·: Â¥"+u(a.item.price.toFixed(2)),1)]),e("div",H,[e("button",{onClick:l[1]||(l[1]=g=>s.$emit("decrease-quantity")),disabled:a.item.quantity<=1},"-",8,X),e("input",{type:"number",value:a.item.quantity,onInput:l[2]||(l[2]=g=>s.$emit("update-quantity",parseInt(g.target?.value??"0")||1)),min:"1",max:a.item.stock||10},null,40,J),e("button",{onClick:l[3]||(l[3]=g=>s.$emit("increase-quantity")),disabled:a.item.quantity>=(a.item.stock||10)},"+",8,K)]),e("div",P,[e("p",tt,"Â¥"+u((a.item.price*a.item.quantity).toFixed(2)),1)]),e("button",{class:"remove-btn",onClick:l[4]||(l[4]=g=>s.$emit("remove-item"))}," åˆ é™¤ ")])}}}),st=h(et,[["__scopeId","data-v-9036d6a6"]]),at={name:"CartSummary",props:{subtotal:Number,shipping:Number,discount:Number,total:Number,itemCount:Number,subtotal:{type:Number,required:!0,default:0},shipping:{type:Number,required:!0,default:0},discount:{type:Number,required:!0,default:0},total:{type:Number,required:!0,default:0}},computed:{getItemCount(){return 3}},methods:{handleCheckout(){Y({message:"æ”¯ä»˜æˆåŠŸï¼",type:"success",duration:3e3,offset:100}),this.$emit("clear-cart-instant")}}},it={class:"cart-summary"},nt={class:"summary-content"},ot={class:"summary-row"},rt={class:"row-label"},lt={class:"item-count"},dt={class:"row-value"},ut={class:"summary-row"},ct={class:"row-label"},mt={key:0,class:"shipping-info"},gt={key:0,class:"summary-row"},vt={class:"row-value discount"},yt={class:"summary-row summary-total"},pt={class:"total-value"},wt={key:1,class:"savings-notice"};function Ct(a,t,i,v,f,y){return o(),d("div",it,[t[8]||(t[8]=e("div",{class:"summary-header"},[e("h3",{class:"summary-title"},"è®¢å•æ‘˜è¦"),e("div",{class:"summary-icon"},"ðŸ“‹")],-1)),e("div",nt,[e("div",ot,[e("div",rt,[t[2]||(t[2]=e("span",null,"å•†å“å°è®¡",-1)),e("span",lt,"("+u(y.getItemCount)+"ä»¶å•†å“)",1)]),e("span",dt,"Â¥"+u(i.subtotal.toFixed(2)),1)]),e("div",ut,[e("div",ct,[t[3]||(t[3]=e("span",null,"è¿è´¹",-1)),i.shipping===0?(o(),d("span",mt,"(å…è¿è´¹)")):c("",!0)]),e("span",{class:j(["row-value",{"free-shipping":i.shipping===0}])},u(i.shipping===0?"å…è´¹":`Â¥${i.shipping.toFixed(2)}`),3)]),i.discount>0?(o(),d("div",gt,[t[4]||(t[4]=e("div",{class:"row-label"},[e("span",null,"ä¼˜æƒ "),e("span",{class:"discount-badge"},"å·²ä¼˜æƒ ")],-1)),e("span",vt,"-Â¥"+u(i.discount.toFixed(2)),1)])):c("",!0),t[6]||(t[6]=e("div",{class:"divider"},null,-1)),e("div",yt,[t[5]||(t[5]=e("span",{class:"total-label"},"è®¢å•æ€»è®¡",-1)),e("span",pt,"Â¥"+u(i.total.toFixed(2)),1)]),i.discount>0?(o(),d("div",wt," æ‚¨å·²èŠ‚çœ Â¥"+u(i.discount.toFixed(2)),1)):c("",!0)]),e("button",{class:"checkout-btn",onClick:t[1]||(t[1]=(...m)=>y.handleCheckout&&y.handleCheckout(...m))},[e("span",{class:"btn-text",onClick:t[0]||(t[0]=(...m)=>a.clearCart&&a.clearCart(...m))},"åŽ»ç»“ç®—"),t[7]||(t[7]=e("span",{class:"btn-arrow"},"â†’",-1))]),t[9]||(t[9]=e("div",{class:"secure-checkout"},[e("div",{class:"secure-icon"},"ðŸ”’"),e("span",null,"å®‰å…¨ç»“ç®— Â· éšç§ä¿æŠ¤")],-1))])}const ft=h(at,[["render",Ct],["__scopeId","data-v-7dced782"]]),It={name:"EmptyCart"},ht={class:"empty-cart"};function bt(a,t,i,v,f,y){const m=Z("router-link");return o(),d("div",ht,[t[1]||(t[1]=e("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTYgMjU2Ij48cmVjdCB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgZmlsbD0iI2Y1ZjVmNSIvPjxwYXRoIGQ9Ik0xMjgsMzJhOTYsOTYsMCwxLDAsOTYsOTZBOTYuMTEsOTYuMTEsMCwwLDAsMTI4LDMyWm0wLDE2YTgwLDgwLDAsMSwxLTgwLTgwQTgwLjA5LDgwLjA5LDAsMCwxLDEyOCw0OFoiIGZpbGw9IiNkZGQiLz48cGF0aCBkPSJNMTY4LDcySDg4YTgsOCwwLDAsMCwwLDE2aDgwYTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjxwYXRoIGQ9Ik0xNzYsMTEySDgwYTgsOCwwLDAsMCwwLDE2aDk2YTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjxwYXRoIGQ9Ik0xNjAsMTUySDk2YTgsOCwwLDAsMCwwLDE2aDY0YTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjwvc3ZnPg==",alt:"ç©ºè´­ç‰©è½¦"},null,-1)),t[2]||(t[2]=e("h3",null,"æ‚¨çš„è´­ç‰©è½¦æ˜¯ç©ºçš„",-1)),t[3]||(t[3]=e("p",null,"å¿«åŽ»æŒ‘é€‰ä¸€äº›å¿ƒä»ªçš„å•†å“å§",-1)),L(m,{to:"/",class:"continue-shopping"},{default:Q(()=>[...t[0]||(t[0]=[A("å‰å¾€è´­ç‰©",-1)])]),_:1})])}const _t=h(It,[["render",bt],["__scopeId","data-v-7ce95bcd"]]),kt={id:"app"},$t={class:"container"},Dt={class:"header"},Lt={key:0,class:"cart-stats"},xt={key:0,class:"loading"},Mt={key:1,class:"error"},Tt={key:2,class:"cart-container"},Nt={class:"cart-items"},Et=$({__name:"index",setup(a){const t=M(),i=_(!1),v=_(!1),f=n=>{try{t.increaseQuantity(n)}catch(r){alert(r.message)}},y=n=>{try{t.decreaseQuantity(n)}catch(r){alert(r.message)}},m=(n,r)=>{try{t.updateQuantity(n,r)}catch(p){alert(p.message)}},s=n=>{confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ")&&t.removeFromCart(n)},l=()=>{if(t.isEmpty){alert("è´­ç‰©è½¦å·²ç»æ˜¯ç©ºçš„");return}confirm("ç¡®å®šè¦æ¸…ç©ºè´­ç‰©è½¦å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼")&&(t.clearCart(),alert("è´­ç‰©è½¦å·²æ¸…ç©º"))},C=()=>{t.clearCart()};D(()=>{i.value=!0;try{t.loadFromLocalStorage(),g()}catch(n){console.error("åŠ è½½è´­ç‰©è½¦æ•°æ®å¤±è´¥:",n),v.value=!0}finally{i.value=!1}});const g=async()=>{for(const n of t.cartItems)if(!n.picture)try{n.picture=b(n)}catch(r){console.error(`èŽ·å–å•†å“ ${n.id} çš„å›¾ç‰‡å¤±è´¥:`,r),n.picture=b(n)}},b=n=>{const r={vegetables:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=150",fruits:"https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?w=150",grains:"https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?w=150",eggs:"https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=150",default:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=150"};return r[n.category]||r.default};return(n,r)=>(o(),d("div",kt,[e("div",$t,[e("div",Dt,[i.value?c("",!0):(o(),d("div",Lt))]),i.value?(o(),d("div",xt,[...r[0]||(r[0]=[e("p",null,"æ­£åœ¨åŠ è½½å•†å“ä¿¡æ¯...",-1)])])):c("",!0),v.value?(o(),d("div",Mt,[...r[1]||(r[1]=[e("p",null,"åŠ è½½å•†å“ä¿¡æ¯å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•",-1)])])):c("",!0),!i.value&&!v.value&&!w(t).isEmpty?(o(),d("div",Tt,[e("div",{class:"cart-actions"},[e("button",{class:"clear-cart-btn",onClick:l},"æ¸…ç©ºè´­ç‰©è½¦")]),e("div",Nt,[(o(!0),d(q,null,O(w(t).cartItems,(p,x)=>(o(),k(st,{key:p.id,item:p,index:x,onIncreaseQuantity:I=>f(p.id),onDecreaseQuantity:I=>y(p.id),onRemoveItem:I=>s(p.id),onUpdateQuantity:I=>m(p.id,I)},null,8,["item","index","onIncreaseQuantity","onDecreaseQuantity","onRemoveItem","onUpdateQuantity"]))),128))]),L(ft,{subtotal:w(t).subtotal,shipping:w(t).shipping,discount:w(t).discount,total:w(t).total,onClearCartInstant:C},null,8,["subtotal","shipping","discount","total"])])):c("",!0),!i.value&&!v.value&&w(t).isEmpty?(o(),k(_t,{key:3})):c("",!0)])]))}}),Qt=h(Et,[["__scopeId","data-v-ce894a28"]]);export{Qt as default};
