import{d as S,c as l,B as b,w as x,o as K,f as n,e as p,h as s,t as c,F as h,j as f,s as B,q as $,g as r,_ as F}from"./index-h8EpgnIO.js";import{u as T,L as N,a as P,b as A}from"./LayoutFooter-C5X0lROI.js";import{u as M}from"./cart-D-r6EA5f.js";import"./user-DXS5Osep.js";import"./productService-DLGyYyOD.js";function v(a){return typeof a=="string"?a:Array.isArray(a)&&a.length>0?a[0]:""}const Q={class:"results-content"},R={key:0,class:"loading-state"},V={key:1,class:"no-results"},j={class:"suggestions"},D={class:"hot-tags"},E=["onClick"],H={key:2},I={class:"results-header"},W={class:"results-count"},z={class:"product-list"},G=["onClick"],J=["src","alt"],O={class:"product-info"},U=["onClick"],X={class:"product-desc"},Y={class:"product-price"},Z=["onClick"],ss={key:3,class:"initial-state"},ts=S({__name:"index",setup(a){const u=b(),y=$(),i=T(),k=M(),m=l(()=>v(u.query.q)||i.keyword),d=l(()=>i.results),w=l(()=>i.isLoading),C=l(()=>i.hotKeywords);x(()=>u.query.q,o=>{const t=v(o);t.trim()&&i.searchProducts(t)},{immediate:!0});const q=o=>{y.push({path:"/search",query:{q:o}})},g=o=>{y.push(`/product/${o}`)},L=o=>{const{quantity:t,...e}=o;k.addToCart(e)};return K(()=>{const o=v(u.query.q);o&&i.searchProducts(o)}),(o,t)=>(r(),n(h,null,[p(N),p(P),s("div",Q,[w.value?(r(),n("div",R,[...t[0]||(t[0]=[s("div",{class:"spinner"},null,-1),s("p",null,"æ­£åœ¨æœç´¢...",-1)])])):d.value.length===0&&m.value?(r(),n("div",V,[t[2]||(t[2]=s("div",{class:"empty-icon"},"ğŸ”",-1)),s("h3",null,'æ²¡æœ‰æ‰¾åˆ°"'+c(m.value)+'"ç›¸å…³å•†å“',1),t[3]||(t[3]=s("p",null,"è¯·å°è¯•å…¶ä»–å…³é”®è¯",-1)),s("div",j,[t[1]||(t[1]=s("h4",null,"çƒ­é—¨æœç´¢ï¼š",-1)),s("div",D,[(r(!0),n(h,null,f(C.value,e=>(r(),n("span",{key:e,class:"hot-tag",onClick:_=>q(e)},c(e),9,E))),128))])])])):d.value.length>0?(r(),n("div",H,[s("div",I,[t[4]||(t[4]=s("h2",null,"æœç´¢ç»“æœ",-1)),s("p",W,"æ‰¾åˆ° "+c(d.value.length)+" ä¸ªç›¸å…³å•†å“",1)]),s("div",z,[(r(!0),n(h,null,f(d.value,e=>(r(),n("div",{key:e.id,class:"product-card"},[s("div",{class:"product-image-wrapper",onClick:_=>g(e.id)},[s("img",{src:e.picture,alt:e.name,class:"product-image"},null,8,J)],8,G),s("div",O,[s("h3",{class:"product-name",onClick:_=>g(e.id)},c(e.name),9,U),s("p",X,c(e.desc),1),s("div",Y,"Â¥"+c(e.price.toFixed(2)),1),s("button",{class:"add-to-cart-btn",onClick:B(_=>L(e),["stop"])},"åŠ å…¥è´­ç‰©è½¦",8,Z)])]))),128))])])):(r(),n("div",ss,[...t[5]||(t[5]=[s("div",{class:"placeholder-icon"},"ğŸ”",-1),s("p",null,"è¯·è¾“å…¥å…³é”®è¯æœç´¢å•†å“",-1)])]))]),p(A)],64))}}),is=F(ts,[["__scopeId","data-v-1bd7ffbb"]]);export{is as default};
