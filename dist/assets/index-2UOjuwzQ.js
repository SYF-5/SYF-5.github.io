import{I as q,y as r,u as j,aU as W,r as k,c as E,x as i,z as t,aV as J,R as m,J as g,ax as N,aW as F,O as $,l as Q,Q as x,P as v,q as R,L as b,ac as M,Y as ot,aX as nt,C as X,aY as rt,aZ as it,aO as lt}from"./vendor-vue-3bll87uX.js";import{p as Z,q as H,r as ct,t as dt}from"./vendor-other-DYmfRs34.js";import{E as ut,a as pt,b as vt,c as mt,d as ft,e as S,f as _t,g as gt,h as ht,i as yt}from"./vendor-element-J_rJnXc9.js";import"./vendor-utils-D_V24Ga1.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();const P=(o,e)=>{const a=o.__vccOpts||o;for(const[n,s]of e)a[n]=s;return a},bt={__name:"App",setup(o){return(e,a)=>(r(),q(j(W)))}},$t=P(bt,[["__scopeId","data-v-dde09078"]]),Y=Z("user",()=>{const o=k(null),e=k(!1),a=k(null),n=E(()=>e.value);return{userInfo:o,isLogin:e,getUserStatus:n,token:a,login:(u,h)=>{o.value=u,a.value=h,e.value=!0},logout:()=>{o.value=null,a.value=null,e.value=!1}}},{persist:{key:"user-store",paths:["userInfo","isLogin","token"],storage:localStorage}}),kt={class:"login-header"},Ct={class:"container m-top-20"},wt={class:"logo"},It={class:"login-section"},Pt={class:"wrapper"},Lt={class:"account-box"},xt={class:"form"},jt={__name:"index",setup(o){const e=F(),a=Y(),n=k({account:"",password:"",agree:!0}),s={account:[{required:!0,message:"ç”¨æˆ·åä¸èƒ½ä¸ºç©º",trigger:"blur"}],password:[{required:!0,message:"å¯†ç ä¸èƒ½ä¸ºç©º",trigger:"blur"},{min:6,max:14,message:"å¯†ç ä¸º6~14ä½",trigger:"blur"}],agree:[{validator:(h,c,f)=>{c?f():f(new Error("è¯·å‹¾é€‰åè®®"))},trigger:"change"}]},l=k(null),u=()=>{l.value.validate(async h=>{if(h)try{const c=`mock-token-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;a.login({id:Date.now(),name:n.value.account,account:n.value.account},c),S.success("ç™»å½•æˆåŠŸï¼"),e.push("/")}catch(c){S.error("ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "),console.error("ç™»å½•å¤±è´¥:",c)}else return S.warning("è¯·æ­£ç¡®å¡«å†™è¡¨å•ä¿¡æ¯"),!1})};return(h,c)=>{const f=N("RouterLink"),L=vt,C=pt,p=mt,y=ft,_=ut;return r(),i("div",null,[t("header",kt,[t("div",Ct,[t("h1",wt,[m(f,{to:"/"},{default:g(()=>c[3]||(c[3]=[$("å°å…”é²œ",-1)])),_:1,__:[3]})]),m(f,{class:"entry",to:"/"},{default:g(()=>c[4]||(c[4]=[$(" è¿›å…¥ç½‘ç«™é¦–é¡µ ",-1),t("i",{class:"iconfont icon-angle-right"},null,-1),t("i",{class:"iconfont icon-angle-right"},null,-1)])),_:1,__:[4]})])]),t("section",It,[t("div",Pt,[c[7]||(c[7]=t("nav",null,[t("a",{href:"javascript:;"},"è´¦æˆ·ç™»å½•")],-1)),t("div",Lt,[t("div",xt,[m(_,{ref_key:"formRef",ref:l,model:n.value,rules:s,"label-position":"right","label-width":"60px","status-icon":""},{default:g(()=>[m(C,{prop:"account",label:"è´¦æˆ·"},{default:g(()=>[m(L,{modelValue:n.value.account,"onUpdate:modelValue":c[0]||(c[0]=w=>n.value.account=w)},null,8,["modelValue"])]),_:1}),m(C,{prop:"password",label:"å¯†ç "},{default:g(()=>[m(L,{modelValue:n.value.password,"onUpdate:modelValue":c[1]||(c[1]=w=>n.value.password=w)},null,8,["modelValue"])]),_:1}),m(C,{prop:"agree","label-width":"22px"},{default:g(()=>[m(p,{size:"large",modelValue:n.value.agree,"onUpdate:modelValue":c[2]||(c[2]=w=>n.value.agree=w)},{default:g(()=>c[5]||(c[5]=[$(" æˆ‘å·²åŒæ„éšç§æ¡æ¬¾å’ŒæœåŠ¡æ¡æ¬¾ ",-1)])),_:1,__:[5]},8,["modelValue"])]),_:1}),m(y,{size:"large",class:"subBtn",onClick:u},{default:g(()=>c[6]||(c[6]=[$("ç‚¹å‡»ç™»å½•",-1)])),_:1,__:[6]})]),_:1},8,["model"])])])])]),c[8]||(c[8]=J('<footer class="login-footer" data-v-447ac3fe><div class="container" data-v-447ac3fe><p data-v-447ac3fe><a href="javascript:;" data-v-447ac3fe>å…³äºæˆ‘ä»¬</a><a href="javascript:;" data-v-447ac3fe>å¸®åŠ©ä¸­å¿ƒ</a><a href="javascript:;" data-v-447ac3fe>å”®åæœåŠ¡</a><a href="javascript:;" data-v-447ac3fe>é…é€ä¸éªŒæ”¶</a><a href="javascript:;" data-v-447ac3fe>å•†åŠ¡åˆä½œ</a><a href="javascript:;" data-v-447ac3fe>æœç´¢æ¨è</a><a href="javascript:;" data-v-447ac3fe>å‹æƒ…é“¾æ¥</a></p><p data-v-447ac3fe>CopyRight Â© å°å…”é²œå„¿</p></div></footer>',1))])}}},St=P(jt,[["__scopeId","data-v-447ac3fe"]]),Tt={class:"app-topnav"},Dt={class:"container"},Mt={href:"javascript:;"},Et=Q({__name:"LayoutNav",setup(o){const e=Y(),a=()=>{e.logout(),S.success("å·²é€€å‡ºç™»å½•")};return(n,s)=>{const l=_t,u=N("router-link");return r(),i("nav",Tt,[t("div",Dt,[t("ul",null,[j(e).isLogin?(r(),i(x,{key:0},[t("li",null,[t("a",Mt,[s[1]||(s[1]=t("i",{class:"iconfont icon-user"},null,-1)),$(v(j(e).userInfo?.account),1)])]),t("li",null,[m(l,{title:"ç¡®è®¤é€€å‡ºå—?","confirm-button-text":"ç¡®è®¤","cancel-button-text":"å–æ¶ˆ",onConfirm:a,"<!--":"",æ·»åŠ ç¡®è®¤é€€å‡ºçš„äº‹ä»¶å¤„ç†:"","--":""},{reference:g(()=>s[2]||(s[2]=[t("a",{href:"javascript:;"},"é€€å‡ºç™»å½•",-1)])),default:g(()=>[s[3]||(s[3]=$(" > ",-1))]),_:1,__:[3]})]),s[5]||(s[5]=t("li",null,[t("a",{href:"javascript:;"},"æˆ‘çš„è®¢å•")],-1)),t("li",null,[m(u,{to:"/Cart"},{default:g(()=>s[4]||(s[4]=[$("æˆ‘çš„è´­ç‰©è½¦",-1)])),_:1,__:[4]})])],64)):(r(),i(x,{key:1},[t("li",null,[t("a",{href:"javascript:;",onClick:s[0]||(s[0]=h=>n.$router.push("/login"))},"è¯·å…ˆç™»å½•")]),s[6]||(s[6]=t("li",null,[t("a",{href:"javascript:;"},"å¸®åŠ©ä¸­å¿ƒ")],-1)),s[7]||(s[7]=t("li",null,[t("a",{href:"javascript:;"},"å…³äºæˆ‘ä»¬")],-1))],64))])])])}}}),qt=P(Et,[["__scopeId","data-v-642715b8"]]),At={},Nt={class:"app-header"},Bt={class:"container"},Ot={class:"logo"},Ft={class:"app-header-nav"},Rt={class:"home"};function Qt(o,e){const a=N("RouterLink"),n=N("router-link");return r(),i("header",Nt,[t("div",Bt,[t("h1",Ot,[m(a,{to:"/"},{default:g(()=>e[0]||(e[0]=[$("å°å…”é²œ",-1)])),_:1,__:[0]})]),t("ul",Ft,[t("li",Rt,[m(a,{to:"/"},{default:g(()=>e[1]||(e[1]=[$("é¦–é¡µ",-1)])),_:1,__:[1]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[2]||(e[2]=[$("å±…å®¶",-1)])),_:1,__:[2]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[3]||(e[3]=[$("ç¾é£Ÿ",-1)])),_:1,__:[3]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[4]||(e[4]=[$("æœé¥°",-1)])),_:1,__:[4]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[5]||(e[5]=[$("æ¯å©´",-1)])),_:1,__:[5]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[6]||(e[6]=[$("æ‰‹æœº",-1)])),_:1,__:[6]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[7]||(e[7]=[$("ç¾å¦†",-1)])),_:1,__:[7]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[8]||(e[8]=[$("ç”µè„‘",-1)])),_:1,__:[8]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[9]||(e[9]=[$("é¥°å“",-1)])),_:1,__:[9]})]),t("li",null,[m(a,{to:"/"},{default:g(()=>e[10]||(e[10]=[$("åŒ»è¯",-1)])),_:1,__:[10]})])]),e[12]||(e[12]=t("div",{class:"search"},[t("i",{class:"iconfont icon-search"}),t("input",{type:"text",placeholder:"æœä¸€æœ"})],-1)),m(n,{to:"/Cart"},{default:g(()=>e[11]||(e[11]=[t("i",{class:"iconfont icon-gouwuche",style:{"font-size":"24px"}},null,-1)])),_:1,__:[11]})])])}const Yt=P(At,[["render",Qt],["__scopeId","data-v-56e42bed"]]),Gt="/assets/qrcode-orqZiaKR.jpg",Vt={},Zt={class:"app_footer"};function Ht(o,e){return r(),i("footer",Zt,e[0]||(e[0]=[J('<div class="contact" data-v-fc83cb7a><div class="container" data-v-fc83cb7a><dl data-v-fc83cb7a><dt data-v-fc83cb7a>å®¢æˆ·æœåŠ¡</dt><dd data-v-fc83cb7a><i class="iconfont icon-kefu" data-v-fc83cb7a></i> åœ¨çº¿å®¢æœ</dd><dd data-v-fc83cb7a><i class="iconfont icon-question" data-v-fc83cb7a></i> é—®é¢˜åé¦ˆ</dd></dl><dl data-v-fc83cb7a><dt data-v-fc83cb7a>å…³æ³¨æˆ‘ä»¬</dt><dd data-v-fc83cb7a><i class="iconfont icon-weixin" data-v-fc83cb7a></i> å…¬ä¼—å·</dd><dd data-v-fc83cb7a><i class="iconfont icon-weibo" data-v-fc83cb7a></i> å¾®åš</dd></dl><dl data-v-fc83cb7a><dt data-v-fc83cb7a>ä¸‹è½½APP</dt><dd class="qrcode" data-v-fc83cb7a><img src="'+Gt+'" data-v-fc83cb7a></dd><dd class="download" data-v-fc83cb7a><span data-v-fc83cb7a>æ‰«æäºŒç»´ç </span><span data-v-fc83cb7a>ç«‹é©¬ä¸‹è½½APP</span><a href="javascript:;" data-v-fc83cb7a>ä¸‹è½½é¡µé¢</a></dd></dl><dl data-v-fc83cb7a><dt data-v-fc83cb7a>æœåŠ¡çƒ­çº¿</dt><dd class="hotline" data-v-fc83cb7a>400-0000-000 <small data-v-fc83cb7a>å‘¨ä¸€è‡³å‘¨æ—¥ 8:00-18:00</small></dd></dl></div></div><div class="extra" data-v-fc83cb7a><div class="container" data-v-fc83cb7a><div class="slogan" data-v-fc83cb7a><a href="javascript:;" data-v-fc83cb7a><i class="iconfont icon-footer01" data-v-fc83cb7a></i><span data-v-fc83cb7a>ä»·æ ¼äº²æ°‘</span></a><a href="javascript:;" data-v-fc83cb7a><i class="iconfont icon-footer02" data-v-fc83cb7a></i><span data-v-fc83cb7a>ç‰©æµå¿«æ·</span></a><a href="javascript:;" data-v-fc83cb7a><i class="iconfont icon-footer03" data-v-fc83cb7a></i><span data-v-fc83cb7a>å“è´¨æ–°é²œ</span></a></div><div class="copyright" data-v-fc83cb7a><p data-v-fc83cb7a><a href="javascript:;" data-v-fc83cb7a>å…³äºæˆ‘ä»¬</a><a href="javascript:;" data-v-fc83cb7a>å¸®åŠ©ä¸­å¿ƒ</a><a href="javascript:;" data-v-fc83cb7a>å”®åæœåŠ¡</a><a href="javascript:;" data-v-fc83cb7a>é…é€ä¸éªŒæ”¶</a><a href="javascript:;" data-v-fc83cb7a>å•†åŠ¡åˆä½œ</a><a href="javascript:;" data-v-fc83cb7a>æœç´¢æ¨è</a><a href="javascript:;" data-v-fc83cb7a>å‹æƒ…é“¾æ¥</a></p><p data-v-fc83cb7a>vueç”µå•†å¹³å°</p></div></div></div>',2)]))}const Ut=P(Vt,[["render",Ht],["__scopeId","data-v-fc83cb7a"]]),zt={__name:"index",setup(o){return(e,a)=>(r(),i(x,null,[m(qt),m(Yt),m(j(W)),m(Ut)],64))}},Wt=P(zt,[["__scopeId","data-v-3273831f"]]);class Jt{constructor(){this.allProducts=[],this.categories=[],this.categoryGoodsMap={},this.loaded=!1,this.productMap={}}async loadAllData(){if(!this.loaded)try{const a=(await H.get("/goods.json")).data;console.log("åŸå§‹æ•°æ®:",a),this.allProducts=[],this.categories=[],this.categoryGoodsMap={},this.productMap={},a.list&&Array.isArray(a.list)&&a.list.forEach(n=>{const s={id:n.id,name:n.name,children:n.children||[]};this.categories.push(s),n.goods&&Array.isArray(n.goods)&&(this.categoryGoodsMap[n.id]=n.goods,n.goods.forEach(l=>{const u={...l,categoryId:n.id,categoryName:n.name,dataSource:"list"};this.productMap[l.id]||(this.allProducts.push(u),this.productMap[l.id]=u)}))}),a.products&&Array.isArray(a.products)&&a.products.forEach(n=>{const s={...n,dataSource:"products"};this.productMap[n.id]||(this.allProducts.push(s),this.productMap[n.id]=s)}),this.loaded=!0,console.log("æ•°æ®åŠ è½½å®Œæˆ",{categories:this.categories.length,totalProducts:this.allProducts.length})}catch(e){console.error("åŠ è½½å•†å“æ•°æ®å¤±è´¥:",e),this.allProducts=[],this.categories=[],this.loaded=!0}}getProductById(e){const a=Number(e);return this.productMap[a]||null}getCategories(){return this.categories}getGoodsByCategoryId(e){return this.categoryGoodsMap[e]||[]}getAllProducts(){return this.allProducts}getNewProducts(){return this.allProducts.filter(e=>e.dataSource==="products")}getProductsByCategoryName(e){const a=this.categories.find(n=>n.name===e);return a?this.getGoodsByCategoryId(a.id):[]}isLoaded(){return this.loaded}}const A=new Jt,Xt={class:"home-category"},Kt={class:"menu"},te={key:0,class:"loading"},ee=["onClick"],se={class:"layer"},ae=["onClick"],oe=["src","alt"],ne={class:"info"},re={class:"name ellipsis-2"},ie={class:"desc ellipsis"},le={class:"price"},ce={__name:"HomeCategory",setup(o){const e=F(),a=k([]),n=k(!0),s=async()=>{try{n.value=!0,await A.loadAllData();const c=A.getCategories();c&&c.length>0?a.value=c:a.value=[{id:1,name:"å±…å®¶",children:["åºŠä¸Šç”¨å“","å®¶å…·","æ”¶çº³"]}]}catch(c){console.error("è·å–åˆ†ç±»æ•°æ®å¤±è´¥:",c),a.value=[{id:1,name:"å±…å®¶",children:["åºŠä¸Šç”¨å“","å®¶å…·"]}]}finally{n.value=!1}},l=(c,f,L)=>{console.log(`ç‚¹å‡»äº† ${f} - ${L}`);const C=A.getGoodsByCategoryId(c);if(C&&C.length>0){const p=C[0];e.push(`/product/${p.id}`)}else alert("è¯¥åˆ†ç±»ä¸‹æš‚æ— å•†å“")},u=c=>{console.log(`ç‚¹å‡»äº†å•†å“ ID: ${c}`),e.push(`/product/${c}`)},h=c=>A.getGoodsByCategoryId(c)||[];return R(()=>{s()}),(c,f)=>{const L=N("RouterLink");return r(),i("div",Xt,[t("ul",Kt,[n.value?(r(),i("li",te," åŠ è½½ä¸­... ")):b("",!0),(r(!0),i(x,null,M(a.value,C=>(r(),i("li",{key:C.id},[m(L,{to:"/category"},{default:g(()=>[$(v(C.name),1)]),_:2},1024),(r(!0),i(x,null,M(C.children,p=>(r(),i("a",{key:p,href:"javascript:;",onClick:y=>l(C.id,C.name,p),class:"sub-category-link"},v(p),9,ee))),128)),t("div",se,[f[1]||(f[1]=t("h4",null,[$("åˆ†ç±»æ¨è "),t("small",null,"æ ¹æ®æ‚¨çš„è´­ä¹°æˆ–æµè§ˆè®°å½•æ¨è")],-1)),t("ul",null,[(r(!0),i(x,null,M(h(C.id),p=>(r(),i("li",{key:p.id},[t("a",{href:"javascript:;",onClick:y=>u(p.id),class:"product-link"},[t("img",{src:p.picture,alt:p.name},null,8,oe),t("div",ne,[t("p",re,v(p.name),1),t("p",ie,v(p.desc),1),t("p",le,[f[0]||(f[0]=t("i",null,"Â¥",-1)),$(v(p.price.toFixed(2)),1)])])],8,ae)]))),128))])])]))),128))])])}}},de=P(ce,[["__scopeId","data-v-ec5e81a0"]]),G=Z("cart",{state:()=>({cartItems:[],shipping:0,discount:0}),getters:{totalItems:o=>o.cartItems.reduce((e,a)=>e+a.quantity,0),subtotal:o=>o.cartItems.reduce((e,a)=>e+a.price*a.quantity,0),total(){return this.subtotal+this.shipping-this.discount},isEmpty:o=>o.cartItems.length===0},actions:{loadFromLocalStorage(){try{const o=localStorage.getItem("shopping_cart");if(o){const e=JSON.parse(o);this.cartItems=e.cartItems||[],this.shipping=e.shipping||0,this.discount=e.discount||0}}catch(o){console.error("åŠ è½½è´­ç‰©è½¦æ•°æ®å¤±è´¥:",o),this.cartItems=[]}},saveToLocalStorage(){try{const o={cartItems:this.cartItems,shipping:this.shipping,discount:this.discount,lastUpdated:new Date().toISOString()};localStorage.setItem("shopping_cart",JSON.stringify(o))}catch(o){console.error("ä¿å­˜è´­ç‰©è½¦æ•°æ®å¤±è´¥:",o)}},addToCart(o,e=1){const a=this.cartItems.find(n=>n.id===o.id);if(a){const n=a.quantity+e;if(o.stock&&n>o.stock)throw new Error(`åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ä¸º${o.stock}ä»¶`);if(o.maxPurchase&&n>o.maxPurchase)throw new Error(`è¯¥å•†å“æœ€å¤šåªèƒ½è´­ä¹°${o.maxPurchase}ä»¶`);a.quantity=n}else{if(o.stock&&e>o.stock)throw new Error(`åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ä¸º${o.stock}ä»¶`);if(o.maxPurchase&&e>o.maxPurchase)throw new Error(`è¯¥å•†å“æœ€å¤šåªèƒ½è´­ä¹°${o.maxPurchase}ä»¶`);this.cartItems.push({...o,quantity:e})}this.saveToLocalStorage()},increaseQuantity(o){const e=this.cartItems.find(a=>a.id===o);if(e){if(e.stock&&e.quantity>=e.stock)throw new Error("åº“å­˜ä¸è¶³ï¼Œæ— æ³•å¢åŠ æ•°é‡");if(e.maxPurchase&&e.quantity>=e.maxPurchase)throw new Error(`è¯¥å•†å“æœ€å¤šåªèƒ½è´­ä¹°${e.maxPurchase}ä»¶`);e.quantity++,this.saveToLocalStorage()}},decreaseQuantity(o){const e=this.cartItems.find(a=>a.id===o);e&&(e.quantity>1?(e.quantity--,this.saveToLocalStorage()):this.removeFromCart(o))},updateQuantity(o,e){const a=this.cartItems.find(n=>n.id===o);if(a){if(e<1){this.removeFromCart(o);return}if(a.stock&&e>a.stock)throw new Error(`åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ä¸º${a.stock}ä»¶`);if(a.maxPurchase&&e>a.maxPurchase)throw new Error(`è¯¥å•†å“æœ€å¤šåªèƒ½è´­ä¹°${a.maxPurchase}ä»¶`);a.quantity=e,this.saveToLocalStorage()}},removeFromCart(o){this.cartItems=this.cartItems.filter(e=>e.id!==o),this.saveToLocalStorage()},clearCart(){this.cartItems=[],this.saveToLocalStorage()},isInCart(o){return this.cartItems.some(e=>e.id===o)},getItemQuantity(o){const e=this.cartItems.find(a=>a.id===o);return e?e.quantity:0}}}),ue={class:"goods-image"},pe=["src","alt"],ve={class:"goods-info"},me={class:"goods-name"},fe={class:"goods-desc"},_e={class:"goods-price"},ge={class:"price"},he=["disabled"],ye={key:0},be={key:1,class:"loading-spinner"},$e={__name:"GoodsItem",props:{product:{type:Object,required:!0}},setup(o){const e=o,a=G(),n=F(),s=k(!1),l=async()=>{if(e.product){s.value=!0;try{await a.addToCart(e.product,1),S({message:`"${e.product.name}" å·²æˆåŠŸæ·»åŠ åˆ°è´­ç‰©è½¦`,type:"success",duration:2e3,showClose:!0,offset:80}),console.log(`æˆåŠŸæ·»åŠ  "${e.product.name}" åˆ°è´­ç‰©è½¦`)}catch(h){console.error("æ·»åŠ è´­ç‰©è½¦å¤±è´¥:",h),S({message:"æ·»åŠ å•†å“å¤±è´¥ï¼Œè¯·é‡è¯•",type:"error",duration:2e3,showClose:!0})}finally{s.value=!1}}},u=()=>{n.push(`/product/${e.product.id}`)};return(h,c)=>(r(),i("div",{class:"goods-item",onClick:u},[t("div",ue,[t("img",{src:o.product.picture,alt:o.product.name},null,8,pe)]),t("div",ve,[t("h3",me,v(o.product.name),1),t("p",fe,v(o.product.description),1),t("div",_e,[t("span",ge,"Â¥"+v(o.product.price),1),t("button",{class:"add-cart-btn",onClick:ot(l,["stop"]),disabled:s.value},[s.value?(r(),i("span",be,"â—")):(r(),i("span",ye,"+"))],8,he)])])]))}},ke=P($e,[["__scopeId","data-v-787547c1"]]),Ce="/assets/222-qdFkonWe.jpg",U=H.create({baseURL:"",timeout:1e4});U.interceptors.request.use(o=>{const a=Y().token;return a&&(o.headers.Authorization=`Bearer ${a}`),o},o=>Promise.reject(o));U.interceptors.response.use(o=>o,o=>{if(o.response)switch(o.response.status){case 401:Y().logout(),S.error("ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"),K.push("/login");break;case 403:S.error("æ‹’ç»è®¿é—®");break;case 404:S.error("è¯·æ±‚èµ„æºä¸å­˜åœ¨");break;case 500:S.error("æœåŠ¡å™¨å†…éƒ¨é”™è¯¯");break;default:S.error(o.response.data?.message||"è¯·æ±‚é”™è¯¯")}else S.error("ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥");return Promise.reject(o)});const we=Z("product",()=>{const o=k([]),e=k(null),a=k(!1),n=k(null);return{productList:o,currentProduct:e,loading:a,error:n,featuredProducts:()=>o.value.slice(0,4),fetchProducts:async()=>{a.value=!0,n.value=null;try{console.log("å¼€å§‹è·å–å•†å“æ•°æ®...");const f=(await U.get("/goods.json")).data;if(console.log("è·å–åˆ°çš„æ•°æ®:",f),f&&f.products)o.value=f.products,console.log("æˆåŠŸè®¾ç½®å•†å“åˆ—è¡¨:",o.value.length);else throw new Error("æ•°æ®æ ¼å¼ä¸æ­£ç¡®: ç¼ºå°‘ products å­—æ®µ")}catch(c){console.error("è·å–å•†å“æ•°æ®å¤±è´¥:",c),n.value="è·å–å•†å“æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚"}finally{a.value=!1}},findProductById:c=>o.value.find(f=>f.id===c),setCurrentProduct:c=>{e.value=c}}}),Ie={class:"home"},Pe={class:"category-nav"},Le={class:"category-icon"},xe={class:"category-name"},je={key:0,class:"loading-state"},Se={key:1,class:"error-state"},Te={class:"product-section"},De={class:"products-grid"},Me={class:"product-section"},Ee={class:"products-grid"},qe=Q({__name:"HomeProduct",setup(o){const e=we(),a=G(),n=F(),s=E(()=>e.loading),l=E(()=>e.error),u=E(()=>e.productList),h=E(()=>{const _=e.featuredProducts();return Array.isArray(_)?_:[]}),c=_=>_?.id||Math.random().toString(36).substr(2,9);R(()=>{u.value.length===0&&e.fetchProducts()});const f=["è”¬èœ","æ°´æœ","è‚‰ç±»","ç²®æ²¹","å¥¶åˆ¶å“","é›¶é£Ÿ"],L=_=>({è”¬èœ:"ğŸ¥¬",æ°´æœ:"ğŸ",è‚‰ç±»:"ğŸ¥©",ç²®æ²¹:"ğŸš",å¥¶åˆ¶å“:"ğŸ¥›",é›¶é£Ÿ:"ğŸª"})[_]||"ğŸ›’",C=_=>{e.setCurrentProduct(_),n.push(`/product/${_.id}`)},p=_=>{a.addToCart(_)},y=()=>{e.fetchProducts()};return(_,w)=>{const D=ke;return r(),i("div",Ie,[w[3]||(w[3]=t("div",{class:"banner"},[t("img",{src:Ce,alt:"å°å…”é²œä¿ƒé”€æ¨ªå¹…"})],-1)),t("div",Pe,[(r(),i(x,null,M(f,I=>t("div",{class:"category-item",key:I},[t("span",Le,v(L(I)),1),t("span",xe,v(I),1)])),64))]),s.value?(r(),i("div",je,w[0]||(w[0]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"å•†å“åŠ è½½ä¸­...",-1)]))):l.value?(r(),i("div",Se,[t("p",null,v(l.value),1),t("button",{onClick:y,class:"retry-btn"},"é‡è¯•")])):(r(),i(x,{key:2},[t("div",Te,[w[1]||(w[1]=t("h2",{class:"section-title"},"æ–°é²œå¥½ç‰©",-1)),t("div",De,[(r(!0),i(x,null,M(h.value,I=>(r(),q(D,{key:c(I),product:I,onItemClick:B=>C(I),onAddToCart:B=>p(I)},null,8,["product","onItemClick","onAddToCart"]))),128))])]),t("div",Me,[w[2]||(w[2]=t("h2",{class:"section-title"},"çƒ­é—¨å•†å“",-1)),t("div",Ee,[(r(!0),i(x,null,M(u.value.slice(4),I=>(r(),q(D,{key:c(I),product:I,onItemClick:B=>C(I),onAddToCart:B=>p(I)},null,8,["product","onItemClick","onAddToCart"]))),128))])])],64))])}}}),Ae=P(qe,[["__scopeId","data-v-3ad8866d"]]),Ne={class:"home-banner"},Be={key:0,class:"loading"},Oe=["src"],Fe={__name:"HomeBanner",setup(o){const e=k([]),a=k(!0),n=async()=>{try{a.value=!0;const s=await H.get("/goods.json");s.data.Banner&&s.data.Banner.length>0?e.value=s.data.Banner:e.value=[{picture:"https://bpic.588ku.com/templet_pic/24/07/29/248e4d2449e3c57163547b6ad600487d.jpg!/fw/750/quality/90/unsharp/true/compress/true"},{picture:"https://via.placeholder.com/1224x500/4ecdc4/ffffff?text=Banner2"}]}catch(s){console.error("è·å–è½®æ’­å›¾æ•°æ®å¤±è´¥:",s),e.value=[{picture:"https://bpic.588ku.com/templet_pic/24/07/29/248e4d2449e3c57163547b6ad600487d.jpg!/fw/750/quality/90/unsharp/true/compress/true"}]}finally{a.value=!1}};return R(()=>{n()}),(s,l)=>(r(),i("div",Ne,[a.value?(r(),i("div",Be," è½®æ’­å›¾åŠ è½½ä¸­... ")):(r(),q(j(gt),{key:1,height:"500px",interval:4e3,"indicator-position":"outside"},{default:g(()=>[(r(!0),i(x,null,M(e.value,(u,h)=>(r(),q(j(ht),{key:h},{default:g(()=>[t("img",{src:u.picture},null,8,Oe)]),_:2},1024))),128))]),_:1}))]))}},Re=P(Fe,[["__scopeId","data-v-7dcf5b6e"]]),Qe={class:"container"},Ye={__name:"index",setup(o){return(e,a)=>(r(),i(x,null,[t("div",Qe,[m(de),m(Re)]),m(Ae)],64))}},Ge={};function Ve(o,e){return" æˆ‘æ˜¯åˆ†ç±» "}const Ze=P(Ge,[["render",Ve]]),He={class:"product-detail-page"},Ue={class:"detail-header"},ze={class:"header-actions"},We={key:0,class:"cart-count"},Je={key:0,class:"loading"},Xe={key:1,class:"error"},Ke={key:2,class:"detail-content"},ts={class:"product-gallery"},es=["src","alt"],ss={class:"product-info"},as={class:"product-title"},os={class:"product-desc"},ns={class:"price-quantity-section"},rs={class:"price-rating"},is={class:"current-price"},ls={key:0,class:"product-rating"},cs={class:"rating-value"},ds={class:"quantity-control-wrapper"},us={class:"quantity-control"},ps=["disabled"],vs={class:"quantity"},ms=["disabled"],fs={key:0,class:"quantity-hint"},_s={key:0,class:"stock-info"},gs={key:1,class:"success-message"},hs={class:"detail-tabs"},ys=["onClick"],bs={class:"tab-content"},$s={key:0},ks={key:1},Cs={class:"spec-table"},ws={key:0},Is={key:2},Ps={key:0,class:"review-summary"},Ls={class:"overall-rating"},xs={class:"rating-score"},js={key:3,class:"detail-footer"},Ss=["disabled"],Ts={key:0},Ds={key:1},Ms=["disabled"],Es={__name:"index",setup(o){const e=nt(),a=F(),n=G(),s=k({}),l=k(1),u=k("detail"),h=k(!0),c=k(!1),f=k(!1),L=k(!1),C=[{id:"detail",label:"å•†å“è¯¦æƒ…"},{id:"spec",label:"è§„æ ¼å‚æ•°"},{id:"review",label:"ç”¨æˆ·è¯„ä»·"}],p={vegetables:"è”¬èœ",fruits:"æ°´æœ",grains:"è°·ç‰©",eggs:"è›‹ç±»"},y=E(()=>n.totalItems),_=E(()=>s.value.stock||30),w=()=>{l.value<_.value&&(l.value+=1)},D=()=>{l.value>1&&(l.value-=1)},I=async()=>{if(s.value){f.value=!0;try{await n.addToCart(s.value,l.value),L.value=!0,setTimeout(()=>{L.value=!1},3e3),console.log(`æˆåŠŸæ·»åŠ  ${l.value} ä»¶ "${s.value.name}" åˆ°è´­ç‰©è½¦`)}catch(T){alert(T.message||"æ·»åŠ å•†å“å¤±è´¥ï¼Œè¯·é‡è¯•"),console.error("æ·»åŠ è´­ç‰©è½¦å¤±è´¥:",T)}finally{f.value=!1}}},B=()=>{I().then(()=>{a.push("/cart")})},et=()=>{a.push("/cart")},st=T=>p[T]||T,at=async T=>{h.value=!0,c.value=!1;try{await A.loadAllData();const d=A.getProductById(T);if(d)s.value=d,s.value.maxPurchase=Math.min(s.value.stock||30,30);else throw new Error("æœªæ‰¾åˆ°è¯¥å•†å“")}catch(d){console.error("åŠ è½½å•†å“å¤±è´¥:",d),c.value=!0}finally{h.value=!1}};return R(()=>{n.loadFromLocalStorage();const T=Number(e.params.id);T?at(T):(c.value=!0,h.value=!1)}),(T,d)=>(r(),i("div",He,[t("header",Ue,[t("button",{onClick:d[0]||(d[0]=O=>T.$router.back()),class:"back-btn"},"â† è¿”å›"),d[4]||(d[4]=t("h1",null,"å•†å“è¯¦æƒ…",-1)),t("div",ze,[d[2]||(d[2]=t("button",null,"åˆ†äº«",-1)),d[3]||(d[3]=t("button",null,"æ”¶è—",-1)),t("div",{class:"cart-indicator",onClick:et},[d[1]||(d[1]=$(" ğŸ›’ ",-1)),y.value>0?(r(),i("span",We,v(y.value),1)):b("",!0)])])]),h.value?(r(),i("div",Je,d[5]||(d[5]=[t("p",null,"æ­£åœ¨åŠ è½½å•†å“ä¿¡æ¯...",-1)]))):b("",!0),c.value?(r(),i("div",Xe,d[6]||(d[6]=[t("p",null,"åŠ è½½å•†å“ä¿¡æ¯å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•",-1)]))):b("",!0),!h.value&&!c.value&&s.value.id?(r(),i("main",Ke,[t("div",ts,[t("img",{src:s.value.picture,alt:s.value.name,class:"main-image"},null,8,es)]),t("div",ss,[t("h2",as,v(s.value.name),1),t("p",os,v(s.value.description||s.value.desc),1),t("div",ns,[t("div",rs,[t("span",is,"Â¥"+v(s.value.price.toFixed(2)),1),s.value.rating?(r(),i("div",ls,[d[7]||(d[7]=t("span",{class:"rating-stars"},"â˜…â˜…â˜…â˜…â˜…",-1)),t("span",cs,v(s.value.rating),1)])):b("",!0)]),t("div",ds,[t("div",us,[t("button",{onClick:D,disabled:l.value<=1},"-",8,ps),t("span",vs,v(l.value),1),t("button",{onClick:w,disabled:l.value>=_.value},"+",8,ms)]),l.value>=_.value?(r(),i("div",fs," å·²è¾¾æœ€å¤§è´­ä¹°æ•°é‡ ")):b("",!0)])]),s.value.stock!==void 0?(r(),i("div",_s," åº“å­˜: "+v(s.value.stock)+"ä»¶ ",1)):b("",!0),L.value?(r(),i("div",gs," âœ… å•†å“å·²æˆåŠŸæ·»åŠ åˆ°è´­ç‰©è½¦ï¼ ")):b("",!0)]),t("div",hs,[(r(),i(x,null,M(C,O=>t("button",{key:O.id,class:X(["tab-btn",{active:u.value===O.id}]),onClick:La=>u.value=O.id},v(O.label),11,ys)),64))]),t("div",bs,[u.value==="detail"?(r(),i("div",$s,[d[8]||(d[8]=t("h3",null,"å•†å“è¯¦æƒ…",-1)),t("p",null,v(s.value.description||s.value.desc),1),t("p",null,"è¿™æ˜¯ä¸€æ¬¾ä¼˜è´¨çš„"+v(s.value.name)+"ï¼Œä¿è¯å“è´¨ã€‚",1)])):b("",!0),u.value==="spec"?(r(),i("div",ks,[d[14]||(d[14]=t("h3",null,"è§„æ ¼å‚æ•°",-1)),t("table",Cs,[t("tr",null,[d[9]||(d[9]=t("td",{class:"spec-label"},"å•†å“åç§°",-1)),t("td",null,v(s.value.name),1)]),t("tr",null,[d[10]||(d[10]=t("td",{class:"spec-label"},"å•†å“åˆ†ç±»",-1)),t("td",null,v(st(s.value.category)||s.value.categoryName),1)]),t("tr",null,[d[11]||(d[11]=t("td",{class:"spec-label"},"ä»·æ ¼",-1)),t("td",null,"Â¥"+v(s.value.price.toFixed(2)),1)]),d[13]||(d[13]=t("tr",null,[t("td",{class:"spec-label"},"åº“å­˜"),t("td",null,"10ä»¶")],-1)),s.value.rating?(r(),i("tr",ws,[d[12]||(d[12]=t("td",{class:"spec-label"},"è¯„åˆ†",-1)),t("td",null,v(s.value.rating)+"åˆ†",1)])):b("",!0)])])):b("",!0),u.value==="review"?(r(),i("div",Is,[d[17]||(d[17]=t("h3",null,"ç”¨æˆ·è¯„ä»·",-1)),s.value.rating?(r(),i("div",Ps,[t("div",Ls,[t("span",xs,v(s.value.rating),1),d[15]||(d[15]=t("div",{class:"rating-stars"},"â˜…â˜…â˜…â˜…â˜…",-1)),d[16]||(d[16]=t("span",{class:"rating-count"},"(æš‚æ— è¯„ä»·)",-1))])])):b("",!0),d[18]||(d[18]=t("div",{class:"no-reviews"},[t("p",null,"æš‚æ— ç”¨æˆ·è¯„ä»·"),t("p",null,"æˆä¸ºç¬¬ä¸€ä¸ªè¯„ä»·æ­¤å•†å“çš„äººå§ï¼")],-1))])):b("",!0)])])):b("",!0),!h.value&&!c.value&&s.value.id?(r(),i("footer",js,[t("button",{class:"cart-btn",onClick:I,disabled:f.value},[f.value?(r(),i("span",Ds,"æ·»åŠ ä¸­...")):(r(),i("span",Ts,"åŠ å…¥è´­ç‰©è½¦"))],8,Ss),t("button",{class:"buy-btn",onClick:B,disabled:f.value},d[19]||(d[19]=[t("span",null,"ç«‹å³è´­ä¹°",-1)]),8,Ms)])):b("",!0)]))}},z=P(Es,[["__scopeId","data-v-07f36150"]]),qs={class:"cart-item"},As={class:"item-image"},Ns=["src","alt"],Bs={class:"item-details"},Os={class:"item-name"},Fs={key:0,class:"item-category"},Rs={class:"item-price"},Qs={class:"quantity-control"},Ys=["disabled"],Gs=["value","max"],Vs=["disabled"],Zs={class:"item-total"},Hs={class:"total-price"},Us=Q({__name:"CartItem",props:{item:{},index:{}},emits:["increase-quantity","decrease-quantity","remove-item","update-quantity"],setup(o){const e={vegetables:"è”¬èœ",fruits:"æ°´æœ",grains:"è°·ç‰©",eggs:"è›‹ç±»"},a=s=>e[s]||s,n=s=>{const l=s.target;l.src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=150"};return(s,l)=>(r(),i("div",qs,[t("div",As,[t("img",{src:s.item.picture,alt:s.item.name,onError:n},null,40,Ns)]),t("div",Bs,[t("h3",Os,v(s.item.name),1),s.item.category?(r(),i("p",Fs,"åˆ†ç±»: "+v(a(s.item.category)),1)):b("",!0),t("p",Rs,"å•ä»·: Â¥"+v(s.item.price.toFixed(2)),1)]),t("div",Qs,[t("button",{onClick:l[0]||(l[0]=u=>s.$emit("decrease-quantity")),disabled:s.item.quantity<=1},"-",8,Ys),t("input",{type:"number",value:s.item.quantity,onInput:l[1]||(l[1]=u=>s.$emit("update-quantity",parseInt(u.target?.value??"0")||1)),min:"1",max:s.item.stock||10},null,40,Gs),t("button",{onClick:l[2]||(l[2]=u=>s.$emit("increase-quantity")),disabled:s.item.quantity>=(s.item.stock||10)},"+",8,Vs)]),t("div",Zs,[t("p",Hs,"Â¥"+v((s.item.price*s.item.quantity).toFixed(2)),1)]),t("button",{class:"remove-btn",onClick:l[3]||(l[3]=u=>s.$emit("remove-item"))}," åˆ é™¤ ")]))}}),zs=P(Us,[["__scopeId","data-v-06a59e77"]]),Ws={name:"CartSummary",props:{subtotal:Number,shipping:Number,discount:Number,total:Number,itemCount:Number,subtotal:{type:Number,required:!0,default:0},shipping:{type:Number,required:!0,default:0},discount:{type:Number,required:!0,default:0},total:{type:Number,required:!0,default:0}},computed:{getItemCount(){return 3}},methods:{handleCheckout(){S({message:"æ”¯ä»˜æˆåŠŸï¼",type:"success",duration:3e3,offset:100}),this.$emit("clear-cart-instant")}}},Js={class:"cart-summary"},Xs={class:"summary-content"},Ks={class:"summary-row"},ta={class:"row-label"},ea={class:"item-count"},sa={class:"row-value"},aa={class:"summary-row"},oa={class:"row-label"},na={key:0,class:"shipping-info"},ra={key:0,class:"summary-row"},ia={class:"row-value discount"},la={class:"summary-row summary-total"},ca={class:"total-value"},da={key:1,class:"savings-notice"};function ua(o,e,a,n,s,l){return r(),i("div",Js,[e[8]||(e[8]=t("div",{class:"summary-header"},[t("h3",{class:"summary-title"},"è®¢å•æ‘˜è¦"),t("div",{class:"summary-icon"},"ğŸ“‹")],-1)),t("div",Xs,[t("div",Ks,[t("div",ta,[e[2]||(e[2]=t("span",null,"å•†å“å°è®¡",-1)),t("span",ea,"("+v(l.getItemCount)+"ä»¶å•†å“)",1)]),t("span",sa,"Â¥"+v(a.subtotal.toFixed(2)),1)]),t("div",aa,[t("div",oa,[e[3]||(e[3]=t("span",null,"è¿è´¹",-1)),a.shipping===0?(r(),i("span",na,"(å…è¿è´¹)")):b("",!0)]),t("span",{class:X(["row-value",{"free-shipping":a.shipping===0}])},v(a.shipping===0?"å…è´¹":`Â¥${a.shipping.toFixed(2)}`),3)]),a.discount>0?(r(),i("div",ra,[e[4]||(e[4]=t("div",{class:"row-label"},[t("span",null,"ä¼˜æƒ "),t("span",{class:"discount-badge"},"å·²ä¼˜æƒ ")],-1)),t("span",ia,"-Â¥"+v(a.discount.toFixed(2)),1)])):b("",!0),e[6]||(e[6]=t("div",{class:"divider"},null,-1)),t("div",la,[e[5]||(e[5]=t("span",{class:"total-label"},"è®¢å•æ€»è®¡",-1)),t("span",ca,"Â¥"+v(a.total.toFixed(2)),1)]),a.discount>0?(r(),i("div",da," æ‚¨å·²èŠ‚çœ Â¥"+v(a.discount.toFixed(2)),1)):b("",!0)]),t("button",{class:"checkout-btn",onClick:e[1]||(e[1]=(...u)=>l.handleCheckout&&l.handleCheckout(...u))},[t("span",{class:"btn-text",onClick:e[0]||(e[0]=(...u)=>o.clearCart&&o.clearCart(...u))},"å»ç»“ç®—"),e[7]||(e[7]=t("span",{class:"btn-arrow"},"â†’",-1))]),e[9]||(e[9]=t("div",{class:"secure-checkout"},[t("div",{class:"secure-icon"},"ğŸ”’"),t("span",null,"å®‰å…¨ç»“ç®— Â· éšç§ä¿æŠ¤")],-1))])}const pa=P(Ws,[["render",ua],["__scopeId","data-v-42324b97"]]),va={name:"EmptyCart"},ma={class:"empty-cart"};function fa(o,e,a,n,s,l){const u=N("router-link");return r(),i("div",ma,[e[1]||(e[1]=t("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTYgMjU2Ij48cmVjdCB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgZmlsbD0iI2Y1ZjVmNSIvPjxwYXRoIGQ9Ik0xMjgsMzJhOTYsOTYsMCwxLDAsOTYsOTZBOTYuMTEsOTYuMTEsMCwwLDAsMTI4LDMyWm0wLDE2YTgwLDgwLDAsMSwxLTgwLTgwQTgwLjA5LDgwLjA5LDAsMCwxLDEyOCw0OFoiIGZpbGw9IiNkZGQiLz48cGF0aCBkPSJNMTY4LDcySDg4YTgsOCwwLDAsMCwwLDE2aDgwYTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjxwYXRoIGQ9Ik0xNzYsMTEySDgwYTgsOCwwLDAsMCwwLDE2aDk2YTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjxwYXRoIGQ9Ik0xNjAsMTUySDk2YTgsOCwwLDAsMCwwLDE2aDY0YTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjwvc3ZnPg==",alt:"ç©ºè´­ç‰©è½¦"},null,-1)),e[2]||(e[2]=t("h3",null,"æ‚¨çš„è´­ç‰©è½¦æ˜¯ç©ºçš„",-1)),e[3]||(e[3]=t("p",null,"å¿«å»æŒ‘é€‰ä¸€äº›å¿ƒä»ªçš„å•†å“å§",-1)),m(u,{to:"/",class:"continue-shopping"},{default:g(()=>e[0]||(e[0]=[$("å‰å¾€è´­ç‰©",-1)])),_:1,__:[0]})])}const _a=P(va,[["render",fa],["__scopeId","data-v-7ce95bcd"]]),ga={id:"app"},ha={class:"container"},ya={class:"header"},ba={key:0,class:"cart-stats"},$a={key:0,class:"loading"},ka={key:1,class:"error"},Ca={key:2,class:"cart-container"},wa={class:"cart-items"},Ia=Q({__name:"index",setup(o){const e=G(),a=k(!1),n=k(!1),s=p=>{try{e.increaseQuantity(p)}catch(y){alert(y.message)}},l=p=>{try{e.decreaseQuantity(p)}catch(y){alert(y.message)}},u=(p,y)=>{try{e.updateQuantity(p,y)}catch(_){alert(_.message)}},h=p=>{confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ")&&e.removeFromCart(p)},c=()=>{if(e.isEmpty){alert("è´­ç‰©è½¦å·²ç»æ˜¯ç©ºçš„");return}confirm("ç¡®å®šè¦æ¸…ç©ºè´­ç‰©è½¦å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼")&&(e.clearCart(),alert("è´­ç‰©è½¦å·²æ¸…ç©º"))},f=()=>{e.clearCart()};R(()=>{a.value=!0;try{e.loadFromLocalStorage(),L()}catch(p){console.error("åŠ è½½è´­ç‰©è½¦æ•°æ®å¤±è´¥:",p),n.value=!0}finally{a.value=!1}});const L=async()=>{for(const p of e.cartItems)if(!p.picture)try{p.picture=C(p)}catch(y){console.error(`è·å–å•†å“ ${p.id} çš„å›¾ç‰‡å¤±è´¥:`,y),p.picture=C(p)}},C=p=>{const y={vegetables:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=150",fruits:"https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?w=150",grains:"https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?w=150",eggs:"https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=150",default:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=150"};return y[p.category]||y.default};return(p,y)=>(r(),i("div",ga,[t("div",ha,[t("div",ya,[a.value?b("",!0):(r(),i("div",ba))]),a.value?(r(),i("div",$a,y[0]||(y[0]=[t("p",null,"æ­£åœ¨åŠ è½½å•†å“ä¿¡æ¯...",-1)]))):b("",!0),n.value?(r(),i("div",ka,y[1]||(y[1]=[t("p",null,"åŠ è½½å•†å“ä¿¡æ¯å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•",-1)]))):b("",!0),!a.value&&!n.value&&!j(e).isEmpty?(r(),i("div",Ca,[t("div",{class:"cart-actions"},[t("button",{class:"clear-cart-btn",onClick:c},"æ¸…ç©ºè´­ç‰©è½¦")]),t("div",wa,[(r(!0),i(x,null,M(j(e).cartItems,(_,w)=>(r(),q(zs,{key:_.id,item:_,index:w,onIncreaseQuantity:D=>s(_.id),onDecreaseQuantity:D=>l(_.id),onRemoveItem:D=>h(_.id),onUpdateQuantity:D=>u(_.id,D)},null,8,["item","index","onIncreaseQuantity","onDecreaseQuantity","onRemoveItem","onUpdateQuantity"]))),128))]),m(pa,{subtotal:j(e).subtotal,shipping:j(e).shipping,discount:j(e).discount,total:j(e).total,onClearCartInstant:f},null,8,["subtotal","shipping","discount","total"])])):b("",!0),!a.value&&!n.value&&j(e).isEmpty?(r(),q(_a,{key:3})):b("",!0)])]))}}),Pa=P(Ia,[["__scopeId","data-v-ce894a28"]]),K=rt({history:it("/"),routes:[{path:"/",component:Wt,children:[{path:"",component:Ye},{path:"category",component:Ze},{path:"cart",component:Pa},{path:"product/:id",component:z,props:!0}]},{path:"/login",component:St},{path:"/product/:id",component:z,props:!0}]}),tt=ct(),V=lt($t);tt.use(dt);V.use(yt);V.use(tt);V.use(K);V.mount("#app");
