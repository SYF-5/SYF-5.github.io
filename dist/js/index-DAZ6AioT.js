var Pt=Object.defineProperty,Lt=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var rt=Object.getOwnPropertySymbols;var St=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var nt=(e,t,a)=>t in e?Pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Z=(e,t)=>{for(var a in t||(t={}))St.call(t,a)&&nt(e,a,t[a]);if(rt)for(var a of rt(t))Mt.call(t,a)&&nt(e,a,t[a]);return e},z=(e,t)=>Lt(e,xt(t));var Tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var D=(e,t,a)=>new Promise((r,o)=>{var c=n=>{try{u(a.next(n))}catch(p){o(p)}},l=n=>{try{u(a.throw(n))}catch(p){o(p)}},u=n=>n.done?r(n.value):Promise.resolve(n.value).then(c,l);u((a=a.apply(e,t)).next())});import{A as j,q as i,u as M,ag as dt,ah as U,r as w,c as E,m as d,t as s,ai as ut,H as b,B as k,a8 as q,aj as Q,F as P,l as V,G as S,b as B,D as $,X as N,C as J,ac as X,L as At,ak as Dt,h as Nt,al as Et,am as jt,an as Ot,ae as Rt}from"./vue-vendor-CGqLoKy0.js";import{L as qt,M as Bt,O as Gt,P as Qt,Q as Ft,R as T,S as g,T as Zt,U as zt,V as Yt,o as pt,W as Vt}from"./element-plus-BNFRpwXG.js";import{a as K}from"./utils-B-_mKA4W.js";var yo=Tt(ht=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();const L=(e,t)=>{const a=e.__vccOpts||e;for(const[r,o]of t)a[r]=o;return a},Ht={__name:"App",setup(e){return(t,a)=>(i(),j(M(dt)))}},Wt=L(Ht,[["__scopeId","data-v-dde09078"]]),H=U("user",()=>{const e=w(null),t=w(!1),a=w(null),r=E(()=>t.value);return{userInfo:e,isLogin:t,getUserStatus:r,token:a,login:(l,u)=>{e.value=l,a.value=u,t.value=!0},logout:()=>{e.value=null,a.value=null,t.value=!1}}},{persist:{key:"user-store",paths:["userInfo","isLogin","token"],storage:localStorage}}),Ut={class:"login-header"},Jt={class:"container m-top-20"},Xt={class:"logo"},Kt={class:"login-section"},te={class:"wrapper"},ee={class:"account-box"},se={class:"form"},ae={__name:"index",setup(e){const t=Q(),a=H(),r=w({account:"",password:"",agree:!0}),o={account:[{required:!0,message:"ç”¨æˆ·åä¸èƒ½ä¸ºç©º",trigger:"blur"}],password:[{required:!0,message:"å¯†ç ä¸èƒ½ä¸ºç©º",trigger:"blur"},{min:6,max:14,message:"å¯†ç ä¸º6~14ä½",trigger:"blur"}],agree:[{validator:(u,n,p)=>{n?p():p(new Error("è¯·å‹¾é€‰åè®®"))},trigger:"change"}]},c=w(null),l=()=>{c.value.validate(u=>D(null,null,function*(){if(u)try{const n=`mock-token-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;a.login({id:Date.now(),name:r.value.account,account:r.value.account},n),T.success("ç™»å½•æˆåŠŸï¼"),t.push("/")}catch(n){T.error("ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "),console.error("ç™»å½•å¤±è´¥:",n)}else return T.warning("è¯·æ­£ç¡®å¡«å†™è¡¨å•ä¿¡æ¯"),!1}))};return(u,n)=>{const p=q("RouterLink"),_=Gt,m=Bt,h=Qt,I=Ft,f=qt;return i(),d("div",null,[s("header",Ut,[s("div",Jt,[s("h1",Xt,[b(p,{to:"/"},{default:k(()=>[...n[3]||(n[3]=[P("å°å…”é²œ",-1)])]),_:1})]),b(p,{class:"entry",to:"/"},{default:k(()=>[...n[4]||(n[4]=[P(" è¿›å…¥ç½‘ç«™é¦–é¡µ ",-1),s("i",{class:"iconfont icon-angle-right"},null,-1),s("i",{class:"iconfont icon-angle-right"},null,-1)])]),_:1})])]),s("section",Kt,[s("div",te,[n[7]||(n[7]=s("nav",null,[s("a",{href:"javascript:;"},"è´¦æˆ·ç™»å½•")],-1)),s("div",ee,[s("div",se,[b(f,{ref_key:"formRef",ref:c,model:r.value,rules:o,"label-position":"right","label-width":"60px","status-icon":""},{default:k(()=>[b(m,{prop:"account",label:"è´¦æˆ·"},{default:k(()=>[b(_,{modelValue:r.value.account,"onUpdate:modelValue":n[0]||(n[0]=y=>r.value.account=y)},null,8,["modelValue"])]),_:1}),b(m,{prop:"password",label:"å¯†ç "},{default:k(()=>[b(_,{modelValue:r.value.password,"onUpdate:modelValue":n[1]||(n[1]=y=>r.value.password=y)},null,8,["modelValue"])]),_:1}),b(m,{prop:"agree","label-width":"22px"},{default:k(()=>[b(h,{size:"large",modelValue:r.value.agree,"onUpdate:modelValue":n[2]||(n[2]=y=>r.value.agree=y)},{default:k(()=>[...n[5]||(n[5]=[P(" æˆ‘å·²åŒæ„éšç§æ¡æ¬¾å’ŒæœåŠ¡æ¡æ¬¾ ",-1)])]),_:1},8,["modelValue"])]),_:1}),b(I,{size:"large",class:"subBtn",onClick:l},{default:k(()=>[...n[6]||(n[6]=[P("ç‚¹å‡»ç™»å½•",-1)])]),_:1})]),_:1},8,["model"])])])])]),n[8]||(n[8]=ut('<footer class="login-footer" data-v-447ac3fe><div class="container" data-v-447ac3fe><p data-v-447ac3fe><a href="javascript:;" data-v-447ac3fe>å…³äºæˆ‘ä»¬</a><a href="javascript:;" data-v-447ac3fe>å¸®åŠ©ä¸­å¿ƒ</a><a href="javascript:;" data-v-447ac3fe>å”®åæœåŠ¡</a><a href="javascript:;" data-v-447ac3fe>é…é€ä¸éªŒæ”¶</a><a href="javascript:;" data-v-447ac3fe>å•†åŠ¡åˆä½œ</a><a href="javascript:;" data-v-447ac3fe>æœç´¢æ¨è</a><a href="javascript:;" data-v-447ac3fe>å‹æƒ…é“¾æ¥</a></p><p data-v-447ac3fe>CopyRight Â© å°å…”é²œå„¿</p></div></footer>',1))])}}},oe=L(ae,[["__scopeId","data-v-447ac3fe"]]),re={class:"app-topnav"},ne={class:"container"},ie={href:"javascript:;"},ce=V({__name:"LayoutNav",setup(e){const t=H(),a=()=>{t.logout(),T.success("å·²é€€å‡ºç™»å½•")};return(r,o)=>{var u;const c=Zt,l=q("router-link");return i(),d("nav",re,[s("div",ne,[s("ul",null,[M(t).isLogin?(i(),d(S,{key:0},[s("li",null,[s("a",ie,[o[1]||(o[1]=s("i",{class:"iconfont icon-user"},null,-1)),P(g((u=M(t).userInfo)==null?void 0:u.account),1)])]),s("li",null,[b(c,{title:"ç¡®è®¤é€€å‡ºå—?","confirm-button-text":"ç¡®è®¤","cancel-button-text":"å–æ¶ˆ",onConfirm:a,"<!--":"",æ·»åŠ ç¡®è®¤é€€å‡ºçš„äº‹ä»¶å¤„ç†:"","--":""},{reference:k(()=>[...o[2]||(o[2]=[s("a",{href:"javascript:;"},"é€€å‡ºç™»å½•",-1)])]),default:k(()=>[o[3]||(o[3]=P(" > ",-1))]),_:1})]),o[5]||(o[5]=s("li",null,[s("a",{href:"javascript:;"},"æˆ‘çš„è®¢å•")],-1)),s("li",null,[b(l,{to:"/Cart"},{default:k(()=>[...o[4]||(o[4]=[P("æˆ‘çš„è´­ç‰©è½¦",-1)])]),_:1})])],64)):(i(),d(S,{key:1},[s("li",null,[s("a",{href:"javascript:;",onClick:o[0]||(o[0]=n=>r.$router.push("/login"))},"è¯·å…ˆç™»å½•")]),o[6]||(o[6]=s("li",null,[s("a",{href:"javascript:;"},"å¸®åŠ©ä¸­å¿ƒ")],-1)),o[7]||(o[7]=s("li",null,[s("a",{href:"javascript:;"},"å…³äºæˆ‘ä»¬")],-1))],64))])])])}}}),le=L(ce,[["__scopeId","data-v-642715b8"]]),de={},ue={class:"app-header"},pe={class:"container"},ve={class:"logo"},fe={class:"app-header-nav"},me={class:"home"};function ge(e,t){const a=q("RouterLink"),r=q("router-link");return i(),d("header",ue,[s("div",pe,[s("h1",ve,[b(a,{to:"/"},{default:k(()=>[...t[0]||(t[0]=[P("å°å…”é²œ",-1)])]),_:1})]),s("ul",fe,[s("li",me,[b(a,{to:"/"},{default:k(()=>[...t[1]||(t[1]=[P("é¦–é¡µ",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[2]||(t[2]=[P("å±…å®¶",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[3]||(t[3]=[P("ç¾é£Ÿ",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[4]||(t[4]=[P("æœé¥°",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[5]||(t[5]=[P("æ¯å©´",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[6]||(t[6]=[P("æ‰‹æœº",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[7]||(t[7]=[P("ç¾å¦†",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[8]||(t[8]=[P("ç”µè„‘",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[9]||(t[9]=[P("é¥°å“",-1)])]),_:1})]),s("li",null,[b(a,{to:"/"},{default:k(()=>[...t[10]||(t[10]=[P("åŒ»è¯",-1)])]),_:1})])]),t[12]||(t[12]=s("div",{class:"search"},[s("i",{class:"iconfont icon-search"}),s("input",{type:"text",placeholder:"æœä¸€æœ"})],-1)),b(r,{to:"/Cart"},{default:k(()=>[...t[11]||(t[11]=[s("i",{class:"iconfont icon-gouwuche",style:{"font-size":"24px"}},null,-1)])]),_:1})])])}const _e=L(de,[["render",ge],["__scopeId","data-v-56e42bed"]]),he="/jpg/qrcode-orqZiaKR.jpg",ye={},be={class:"app_footer"};function Ie(e,t){return i(),d("footer",be,[...t[0]||(t[0]=[ut('<div class="contact" data-v-fc83cb7a><div class="container" data-v-fc83cb7a><dl data-v-fc83cb7a><dt data-v-fc83cb7a>å®¢æˆ·æœåŠ¡</dt><dd data-v-fc83cb7a><i class="iconfont icon-kefu" data-v-fc83cb7a></i> åœ¨çº¿å®¢æœ</dd><dd data-v-fc83cb7a><i class="iconfont icon-question" data-v-fc83cb7a></i> é—®é¢˜åé¦ˆ</dd></dl><dl data-v-fc83cb7a><dt data-v-fc83cb7a>å…³æ³¨æˆ‘ä»¬</dt><dd data-v-fc83cb7a><i class="iconfont icon-weixin" data-v-fc83cb7a></i> å…¬ä¼—å·</dd><dd data-v-fc83cb7a><i class="iconfont icon-weibo" data-v-fc83cb7a></i> å¾®åš</dd></dl><dl data-v-fc83cb7a><dt data-v-fc83cb7a>ä¸‹è½½APP</dt><dd class="qrcode" data-v-fc83cb7a><img src="'+he+'" data-v-fc83cb7a></dd><dd class="download" data-v-fc83cb7a><span data-v-fc83cb7a>æ‰«æäºŒç»´ç </span><span data-v-fc83cb7a>ç«‹é©¬ä¸‹è½½APP</span><a href="javascript:;" data-v-fc83cb7a>ä¸‹è½½é¡µé¢</a></dd></dl><dl data-v-fc83cb7a><dt data-v-fc83cb7a>æœåŠ¡çƒ­çº¿</dt><dd class="hotline" data-v-fc83cb7a>400-0000-000 <small data-v-fc83cb7a>å‘¨ä¸€è‡³å‘¨æ—¥ 8:00-18:00</small></dd></dl></div></div><div class="extra" data-v-fc83cb7a><div class="container" data-v-fc83cb7a><div class="slogan" data-v-fc83cb7a><a href="javascript:;" data-v-fc83cb7a><i class="iconfont icon-footer01" data-v-fc83cb7a></i><span data-v-fc83cb7a>ä»·æ ¼äº²æ°‘</span></a><a href="javascript:;" data-v-fc83cb7a><i class="iconfont icon-footer02" data-v-fc83cb7a></i><span data-v-fc83cb7a>ç‰©æµå¿«æ·</span></a><a href="javascript:;" data-v-fc83cb7a><i class="iconfont icon-footer03" data-v-fc83cb7a></i><span data-v-fc83cb7a>å“è´¨æ–°é²œ</span></a></div><div class="copyright" data-v-fc83cb7a><p data-v-fc83cb7a><a href="javascript:;" data-v-fc83cb7a>å…³äºæˆ‘ä»¬</a><a href="javascript:;" data-v-fc83cb7a>å¸®åŠ©ä¸­å¿ƒ</a><a href="javascript:;" data-v-fc83cb7a>å”®åæœåŠ¡</a><a href="javascript:;" data-v-fc83cb7a>é…é€ä¸éªŒæ”¶</a><a href="javascript:;" data-v-fc83cb7a>å•†åŠ¡åˆä½œ</a><a href="javascript:;" data-v-fc83cb7a>æœç´¢æ¨è</a><a href="javascript:;" data-v-fc83cb7a>å‹æƒ…é“¾æ¥</a></p><p data-v-fc83cb7a>vueç”µå•†å¹³å°</p></div></div></div>',2)])])}const $e=L(ye,[["render",Ie],["__scopeId","data-v-fc83cb7a"]]),ke={__name:"index",setup(e){return(t,a)=>(i(),d(S,null,[b(le),b(_e),b(M(dt)),b($e)],64))}},we=L(ke,[["__scopeId","data-v-3273831f"]]);class Ce{constructor(){this.allProducts=[],this.categories=[],this.categoryGoodsMap={},this.loaded=!1,this.productMap={}}loadAllData(){return D(this,null,function*(){if(!this.loaded)try{const a=(yield K.get("/goods.json")).data;console.log("åŸå§‹æ•°æ®:",a),this.allProducts=[],this.categories=[],this.categoryGoodsMap={},this.productMap={},a.list&&Array.isArray(a.list)&&a.list.forEach(r=>{const o={id:r.id,name:r.name,children:r.children||[]};this.categories.push(o),r.goods&&Array.isArray(r.goods)&&(this.categoryGoodsMap[r.id]=r.goods,r.goods.forEach(c=>{const l=z(Z({},c),{categoryId:r.id,categoryName:r.name,dataSource:"list"});this.productMap[c.id]||(this.allProducts.push(l),this.productMap[c.id]=l)}))}),a.products&&Array.isArray(a.products)&&a.products.forEach(r=>{const o=z(Z({},r),{dataSource:"products"});this.productMap[r.id]||(this.allProducts.push(o),this.productMap[r.id]=o)}),this.loaded=!0,console.log("æ•°æ®åŠ è½½å®Œæˆ",{categories:this.categories.length,totalProducts:this.allProducts.length})}catch(t){console.error("åŠ è½½å•†å“æ•°æ®å¤±è´¥:",t),this.allProducts=[],this.categories=[],this.loaded=!0}})}getProductById(t){const a=Number(t);return this.productMap[a]||null}getCategories(){return this.categories}getGoodsByCategoryId(t){return this.categoryGoodsMap[t]||[]}getAllProducts(){return this.allProducts}getNewProducts(){return this.allProducts.filter(t=>t.dataSource==="products")}getProductsByCategoryName(t){const a=this.categories.find(r=>r.name===t);return a?this.getGoodsByCategoryId(a.id):[]}isLoaded(){return this.loaded}}const R=new Ce,Pe={class:"home-category"},Le={class:"menu"},xe={key:0,class:"loading"},Se=["onClick"],Me={class:"layer"},Te=["onClick"],Ae={class:"image-container"},De=["alt","onLoad"],Ne={key:0,class:"loading-placeholder"},Ee={class:"info"},je={class:"name ellipsis-2"},Oe={class:"desc ellipsis"},Re={class:"price"},qe={__name:"HomeCategory",setup(e){const t=Q(),a=w([]),r=w(!0),o=w({}),c=()=>D(null,null,function*(){try{r.value=!0,yield R.loadAllData();const _=R.getCategories();_&&_.length>0?a.value=_:a.value=[{id:1,name:"å±…å®¶",children:["åºŠä¸Šç”¨å“","å®¶å…·","æ”¶çº³"]}]}catch(_){console.error("è·å–åˆ†ç±»æ•°æ®å¤±è´¥:",_),a.value=[{id:1,name:"å±…å®¶",children:["åºŠä¸Šç”¨å“","å®¶å…·"]}]}finally{r.value=!1}}),l=(_,m,h)=>{console.log(`ç‚¹å‡»äº† ${m} - ${h}`);const I=R.getGoodsByCategoryId(_);if(I&&I.length>0){const f=I[0];t.push(`/product/${f.id}`)}else alert("è¯¥åˆ†ç±»ä¸‹æš‚æ— å•†å“")},u=_=>{console.log(`ç‚¹å‡»äº†å•†å“ ID: ${_}`),t.push(`/product/${_}`)},n=_=>{o.value[_]=!0},p=_=>{const m=R.getGoodsByCategoryId(_)||[];return m.forEach(h=>{o.value[h.id]||(o.value[h.id]=!1)}),m};return B(()=>{c()}),(_,m)=>{const h=q("RouterLink"),I=X("lazy");return i(),d("div",Pe,[s("ul",Le,[r.value?(i(),d("li",xe," åŠ è½½ä¸­... ")):$("",!0),(i(!0),d(S,null,N(a.value,f=>(i(),d("li",{key:f.id},[b(h,{to:"/category"},{default:k(()=>[P(g(f.name),1)]),_:2},1024),(i(!0),d(S,null,N(f.children,y=>(i(),d("a",{key:y,href:"javascript:;",onClick:A=>l(f.id,f.name,y),class:"sub-category-link"},g(y),9,Se))),128)),s("div",Me,[m[1]||(m[1]=s("h4",null,[P("åˆ†ç±»æ¨è "),s("small",null,"æ ¹æ®æ‚¨çš„è´­ä¹°æˆ–æµè§ˆè®°å½•æ¨è")],-1)),s("ul",null,[(i(!0),d(S,null,N(p(f.id),y=>(i(),d("li",{key:y.id},[s("a",{href:"javascript:;",onClick:A=>u(y.id),class:"product-link"},[s("div",Ae,[J(s("img",{alt:y.name,onLoad:A=>n(y.id)},null,40,De),[[I,y.picture]]),o.value[y.id]?$("",!0):(i(),d("div",Ne))]),s("div",Ee,[s("p",je,g(y.name),1),s("p",Oe,g(y.desc),1),s("p",Re,[m[0]||(m[0]=s("i",null,"Â¥",-1)),P(g(y.price.toFixed(2)),1)])])],8,Te)]))),128))])])]))),128))])])}}},Be=L(qe,[["__scopeId","data-v-1fa11ada"]]),W=U("cart",{state:()=>({cartItems:[],shipping:0,discount:0}),getters:{totalItems:e=>e.cartItems.reduce((t,a)=>t+a.quantity,0),subtotal:e=>e.cartItems.reduce((t,a)=>t+a.price*a.quantity,0),total(){return this.subtotal+this.shipping-this.discount},isEmpty:e=>e.cartItems.length===0},actions:{loadFromLocalStorage(){try{const e=localStorage.getItem("shopping_cart");if(e){const t=JSON.parse(e);this.cartItems=t.cartItems||[],this.shipping=t.shipping||0,this.discount=t.discount||0}}catch(e){console.error("åŠ è½½è´­ç‰©è½¦æ•°æ®å¤±è´¥:",e),this.cartItems=[]}},saveToLocalStorage(){try{const e={cartItems:this.cartItems,shipping:this.shipping,discount:this.discount,lastUpdated:new Date().toISOString()};localStorage.setItem("shopping_cart",JSON.stringify(e))}catch(e){console.error("ä¿å­˜è´­ç‰©è½¦æ•°æ®å¤±è´¥:",e)}},addToCart(e,t=1){const a=this.cartItems.find(r=>r.id===e.id);if(a){const r=a.quantity+t;if(e.stock&&r>e.stock)throw new Error(`åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ä¸º${e.stock}ä»¶`);if(e.maxPurchase&&r>e.maxPurchase)throw new Error(`è¯¥å•†å“æœ€å¤šåªèƒ½è´­ä¹°${e.maxPurchase}ä»¶`);a.quantity=r}else{if(e.stock&&t>e.stock)throw new Error(`åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ä¸º${e.stock}ä»¶`);if(e.maxPurchase&&t>e.maxPurchase)throw new Error(`è¯¥å•†å“æœ€å¤šåªèƒ½è´­ä¹°${e.maxPurchase}ä»¶`);this.cartItems.push(z(Z({},e),{quantity:t}))}this.saveToLocalStorage()},increaseQuantity(e){const t=this.cartItems.find(a=>a.id===e);if(t){if(t.stock&&t.quantity>=t.stock)throw new Error("åº“å­˜ä¸è¶³ï¼Œæ— æ³•å¢åŠ æ•°é‡");if(t.maxPurchase&&t.quantity>=t.maxPurchase)throw new Error(`è¯¥å•†å“æœ€å¤šåªèƒ½è´­ä¹°${t.maxPurchase}ä»¶`);t.quantity++,this.saveToLocalStorage()}},decreaseQuantity(e){const t=this.cartItems.find(a=>a.id===e);t&&(t.quantity>1?(t.quantity--,this.saveToLocalStorage()):this.removeFromCart(e))},updateQuantity(e,t){const a=this.cartItems.find(r=>r.id===e);if(a){if(t<1){this.removeFromCart(e);return}if(a.stock&&t>a.stock)throw new Error(`åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ä¸º${a.stock}ä»¶`);if(a.maxPurchase&&t>a.maxPurchase)throw new Error(`è¯¥å•†å“æœ€å¤šåªèƒ½è´­ä¹°${a.maxPurchase}ä»¶`);a.quantity=t,this.saveToLocalStorage()}},removeFromCart(e){this.cartItems=this.cartItems.filter(t=>t.id!==e),this.saveToLocalStorage()},clearCart(){this.cartItems=[],this.saveToLocalStorage()},isInCart(e){return this.cartItems.some(t=>t.id===e)},getItemQuantity(e){const t=this.cartItems.find(a=>a.id===e);return t?t.quantity:0}}}),Ge={class:"goods-image"},Qe=["src","alt"],Fe={class:"goods-info"},Ze={class:"goods-name"},ze={class:"goods-desc"},Ye={class:"goods-price"},Ve={class:"price"},He=["disabled"],We={key:0},Ue={key:1,class:"loading-spinner"},Je={__name:"GoodsItem",props:{product:{type:Object,required:!0}},setup(e){const t=e,a=W(),r=Q(),o=w(!1),c=()=>D(null,null,function*(){if(t.product){o.value=!0;try{yield a.addToCart(t.product,1),T({message:`"${t.product.name}" å·²æˆåŠŸæ·»åŠ åˆ°è´­ç‰©è½¦`,type:"success",duration:2e3,showClose:!0,offset:80}),console.log(`æˆåŠŸæ·»åŠ  "${t.product.name}" åˆ°è´­ç‰©è½¦`)}catch(u){console.error("æ·»åŠ è´­ç‰©è½¦å¤±è´¥:",u),T({message:"æ·»åŠ å•†å“å¤±è´¥ï¼Œè¯·é‡è¯•",type:"error",duration:2e3,showClose:!0})}finally{o.value=!1}}}),l=()=>{r.push(`/product/${t.product.id}`)};return(u,n)=>(i(),d("div",{class:"goods-item",onClick:l},[s("div",Ge,[s("img",{src:e.product.picture,alt:e.product.name},null,8,Qe)]),s("div",Fe,[s("h3",Ze,g(e.product.name),1),s("p",ze,g(e.product.description),1),s("div",Ye,[s("span",Ve,"Â¥"+g(e.product.price),1),s("button",{class:"add-cart-btn",onClick:At(c,["stop"]),disabled:o.value},[o.value?(i(),d("span",Ue,"â—")):(i(),d("span",We,"+"))],8,He)])])]))}},Xe=L(Je,[["__scopeId","data-v-787547c1"]]),Ke="/jpg/222-qdFkonWe.jpg",tt=K.create({baseURL:"",timeout:1e4});tt.interceptors.request.use(e=>{const a=H().token;return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e));tt.interceptors.response.use(e=>e,e=>{var t;if(e.response)switch(e.response.status){case 401:H().logout(),T.error("ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"),vt.push("/login");break;case 403:T.error("æ‹’ç»è®¿é—®");break;case 404:T.error("è¯·æ±‚èµ„æºä¸å­˜åœ¨");break;case 500:T.error("æœåŠ¡å™¨å†…éƒ¨é”™è¯¯");break;default:T.error(((t=e.response.data)==null?void 0:t.message)||"è¯·æ±‚é”™è¯¯")}else T.error("ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥");return Promise.reject(e)});const ts=U("product",()=>{const e=w([]),t=w(null),a=w(!1),r=w(null);return{productList:e,currentProduct:t,loading:a,error:r,featuredProducts:()=>e.value.slice(0,4),fetchProducts:()=>D(null,null,function*(){a.value=!0,r.value=null;try{console.log("å¼€å§‹è·å–å•†å“æ•°æ®...");const p=(yield tt.get("/goods.json")).data;if(console.log("è·å–åˆ°çš„æ•°æ®:",p),p&&p.products)e.value=p.products,console.log("æˆåŠŸè®¾ç½®å•†å“åˆ—è¡¨:",e.value.length);else throw new Error("æ•°æ®æ ¼å¼ä¸æ­£ç¡®: ç¼ºå°‘ products å­—æ®µ")}catch(n){console.error("è·å–å•†å“æ•°æ®å¤±è´¥:",n),r.value="è·å–å•†å“æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚"}finally{a.value=!1}}),findProductById:n=>e.value.find(p=>p.id===n),setCurrentProduct:n=>{t.value=n}}}),es={class:"home"},ss={class:"category-nav"},as={class:"category-icon"},os={class:"category-name"},rs={key:0,class:"loading-state"},ns={key:1,class:"error-state"},is={class:"product-section"},cs={class:"products-grid"},ls={class:"product-section"},ds={class:"products-grid"},us=V({__name:"HomeProduct",setup(e){const t=ts(),a=W(),r=Q(),o=E(()=>t.loading),c=E(()=>t.error),l=E(()=>t.productList),u=E(()=>{const f=t.featuredProducts();return Array.isArray(f)?f:[]}),n=f=>(f==null?void 0:f.id)||Math.random().toString(36).substr(2,9);B(()=>{l.value.length===0&&t.fetchProducts()});const p=["è”¬èœ","æ°´æœ","è‚‰ç±»","ç²®æ²¹","å¥¶åˆ¶å“","é›¶é£Ÿ"],_=f=>({è”¬èœ:"ğŸ¥¬",æ°´æœ:"ğŸ",è‚‰ç±»:"ğŸ¥©",ç²®æ²¹:"ğŸš",å¥¶åˆ¶å“:"ğŸ¥›",é›¶é£Ÿ:"ğŸª"})[f]||"ğŸ›’",m=f=>{t.setCurrentProduct(f),r.push(`/product/${f.id}`)},h=f=>{a.addToCart(f)},I=()=>{t.fetchProducts()};return(f,y)=>{const A=Xe;return i(),d("div",es,[y[3]||(y[3]=s("div",{class:"banner"},[s("img",{src:Ke,alt:"å°å…”é²œä¿ƒé”€æ¨ªå¹…"})],-1)),s("div",ss,[(i(),d(S,null,N(p,x=>s("div",{class:"category-item",key:x},[s("span",as,g(_(x)),1),s("span",os,g(x),1)])),64))]),o.value?(i(),d("div",rs,[...y[0]||(y[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"å•†å“åŠ è½½ä¸­...",-1)])])):c.value?(i(),d("div",ns,[s("p",null,g(c.value),1),s("button",{onClick:I,class:"retry-btn"},"é‡è¯•")])):(i(),d(S,{key:2},[s("div",is,[y[1]||(y[1]=s("h2",{class:"section-title"},"æ–°é²œå¥½ç‰©",-1)),s("div",cs,[(i(!0),d(S,null,N(u.value,x=>(i(),j(A,{key:n(x),product:x,onItemClick:O=>m(x),onAddToCart:O=>h(x)},null,8,["product","onItemClick","onAddToCart"]))),128))])]),s("div",ls,[y[2]||(y[2]=s("h2",{class:"section-title"},"çƒ­é—¨å•†å“",-1)),s("div",ds,[(i(!0),d(S,null,N(l.value.slice(4),x=>(i(),j(A,{key:n(x),product:x,onItemClick:O=>m(x),onAddToCart:O=>h(x)},null,8,["product","onItemClick","onAddToCart"]))),128))])])],64))])}}}),ps=L(us,[["__scopeId","data-v-3ad8866d"]]),vs={class:"home-banner"},fs={key:0,class:"loading"},ms=["src"],gs={__name:"HomeBanner",setup(e){const t=w([]),a=w(!0),r=()=>D(null,null,function*(){try{a.value=!0;const o=yield K.get("/goods.json");o.data.Banner&&o.data.Banner.length>0?t.value=o.data.Banner:t.value=[{picture:"https://bpic.588ku.com/templet_pic/24/07/29/248e4d2449e3c57163547b6ad600487d.jpg!/fw/750/quality/90/unsharp/true/compress/true"},{picture:"https://via.placeholder.com/1224x500/4ecdc4/ffffff?text=Banner2"}]}catch(o){console.error("è·å–è½®æ’­å›¾æ•°æ®å¤±è´¥:",o),t.value=[{picture:"https://bpic.588ku.com/templet_pic/24/07/29/248e4d2449e3c57163547b6ad600487d.jpg!/fw/750/quality/90/unsharp/true/compress/true"}]}finally{a.value=!1}});return B(()=>{r()}),(o,c)=>(i(),d("div",vs,[a.value?(i(),d("div",fs," è½®æ’­å›¾åŠ è½½ä¸­... ")):(i(),j(M(zt),{key:1,height:"500px",interval:4e3,"indicator-position":"outside"},{default:k(()=>[(i(!0),d(S,null,N(t.value,(l,u)=>(i(),j(M(Yt),{key:u},{default:k(()=>[s("img",{src:l.picture},null,8,ms)]),_:2},1024))),128))]),_:1}))]))}},_s=L(gs,[["__scopeId","data-v-7dcf5b6e"]]),hs={class:"container"},ys={__name:"index",setup(e){return(t,a)=>(i(),d(S,null,[s("div",hs,[b(Be),b(_s)]),b(ps)],64))}},bs={};function Is(e,t){return" æˆ‘æ˜¯åˆ†ç±» "}const $s=L(bs,[["render",Is]]),ks={class:"product-detail-page"},ws={class:"detail-header"},Cs={class:"header-actions"},Ps={key:0,class:"cart-count"},Ls={key:0,class:"loading"},xs={key:1,class:"error"},Ss={key:2,class:"detail-content"},Ms={class:"product-gallery"},Ts=["alt"],As={key:0,class:"loading-placeholder"},Ds={class:"product-info"},Ns={class:"product-title"},Es={class:"product-desc"},js={class:"price-quantity-section"},Os={class:"price-rating"},Rs={class:"current-price"},qs={key:0,class:"product-rating"},Bs={class:"rating-value"},Gs={class:"quantity-control-wrapper"},Qs={class:"quantity-control"},Fs=["disabled"],Zs={class:"quantity"},zs=["disabled"],Ys={key:0,class:"quantity-hint"},Vs={key:0,class:"stock-info"},Hs={key:1,class:"success-message"},Ws={class:"detail-tabs"},Us=["onClick"],Js={class:"tab-content"},Xs={key:0},Ks={key:1},ta={class:"spec-table"},ea={key:0},sa={key:2},aa={key:0,class:"review-summary"},oa={class:"overall-rating"},ra={class:"rating-score"},na={key:3,class:"detail-footer"},ia=["disabled"],ca={key:0},la={key:1},da=["disabled"],ua={__name:"index",setup(e){const t=Dt(),a=Q(),r=W(),o=w({}),c=w(1),l=w("detail"),u=w(!0),n=w(!1),p=w(!1),_=w(!1),m=w(!1),h=[{id:"detail",label:"å•†å“è¯¦æƒ…"},{id:"spec",label:"è§„æ ¼å‚æ•°"},{id:"review",label:"ç”¨æˆ·è¯„ä»·"}],I={vegetables:"è”¬èœ",fruits:"æ°´æœ",grains:"è°·ç‰©",eggs:"è›‹ç±»"},f=E(()=>r.totalItems),y=E(()=>o.value.stock||30),A=()=>{c.value<y.value&&(c.value+=1)},x=()=>{c.value>1&&(c.value-=1)},O=()=>D(null,null,function*(){if(o.value){p.value=!0;try{yield r.addToCart(o.value,c.value),_.value=!0,setTimeout(()=>{_.value=!1},3e3),console.log(`æˆåŠŸæ·»åŠ  ${c.value} ä»¶ "${o.value.name}" åˆ°è´­ç‰©è½¦`)}catch(C){alert(C.message||"æ·»åŠ å•†å“å¤±è´¥ï¼Œè¯·é‡è¯•"),console.error("æ·»åŠ è´­ç‰©è½¦å¤±è´¥:",C)}finally{p.value=!1}}}),yt=()=>{O().then(()=>{a.push("/cart")})},bt=()=>{a.push("/cart")},It=C=>I[C]||C,$t=()=>{m.value=!0,console.log("å•†å“å›¾ç‰‡åŠ è½½æˆåŠŸ")},kt=C=>{console.error("å•†å“å›¾ç‰‡åŠ è½½å¤±è´¥:",C),m.value=!0;const v=C.target;v.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7lm77niYfpnZ7lu7o8L3RleHQ+PC9zdmc+"},st=C=>C?C.startsWith("http")||C.startsWith("/")||C.startsWith("./")?C:`/${C}`:(console.warn("å›¾ç‰‡è·¯å¾„ä¸ºç©º"),""),wt=C=>D(null,null,function*(){u.value=!0,n.value=!1,m.value=!1;try{yield R.loadAllData();const v=R.getProductById(C);if(v)o.value=v,o.value.maxPurchase=Math.min(o.value.stock||30,30),console.log("åŠ è½½çš„å•†å“æ•°æ®:",o.value),console.log("å•†å“å›¾ç‰‡è·¯å¾„:",o.value.picture),console.log("å¤„ç†åçš„å›¾ç‰‡è·¯å¾„:",st(o.value.picture));else throw new Error("æœªæ‰¾åˆ°è¯¥å•†å“")}catch(v){console.error("åŠ è½½å•†å“å¤±è´¥:",v),n.value=!0}finally{u.value=!1}});return B(()=>{r.loadFromLocalStorage();const C=Number(t.params.id);C?wt(C):(n.value=!0,u.value=!1)}),(C,v)=>{var at,ot;const Ct=X("lazy");return i(),d("div",ks,[s("header",ws,[s("button",{onClick:v[0]||(v[0]=G=>C.$router.back()),class:"back-btn"},"â† è¿”å›"),v[4]||(v[4]=s("h1",null,"å•†å“è¯¦æƒ…",-1)),s("div",Cs,[v[2]||(v[2]=s("button",null,"åˆ†äº«",-1)),v[3]||(v[3]=s("button",null,"æ”¶è—",-1)),s("div",{class:"cart-indicator",onClick:bt},[v[1]||(v[1]=P(" ğŸ›’ ",-1)),f.value>0?(i(),d("span",Ps,g(f.value),1)):$("",!0)])])]),u.value?(i(),d("div",Ls,[...v[5]||(v[5]=[s("p",null,"æ­£åœ¨åŠ è½½å•†å“ä¿¡æ¯...",-1)])])):$("",!0),n.value?(i(),d("div",xs,[...v[6]||(v[6]=[s("p",null,"åŠ è½½å•†å“ä¿¡æ¯å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•",-1)])])):$("",!0),!u.value&&!n.value&&o.value.id?(i(),d("main",Ss,[s("div",Ms,[J(s("img",{alt:o.value.name,class:"main-image",onLoad:$t,onError:kt},null,40,Ts),[[Ct,st(o.value.picture)]]),m.value?$("",!0):(i(),d("div",As))]),s("div",Ds,[s("h2",Ns,g(o.value.name),1),s("p",Es,g(o.value.description||o.value.desc),1),s("div",js,[s("div",Os,[s("span",Rs,"Â¥"+g((at=o.value.price)==null?void 0:at.toFixed(2)),1),o.value.rating?(i(),d("div",qs,[v[7]||(v[7]=s("span",{class:"rating-stars"},"â˜…â˜…â˜…â˜…â˜…",-1)),s("span",Bs,g(o.value.rating),1)])):$("",!0)]),s("div",Gs,[s("div",Qs,[s("button",{onClick:x,disabled:c.value<=1},"-",8,Fs),s("span",Zs,g(c.value),1),s("button",{onClick:A,disabled:c.value>=y.value},"+",8,zs)]),c.value>=y.value?(i(),d("div",Ys," å·²è¾¾æœ€å¤§è´­ä¹°æ•°é‡ ")):$("",!0)])]),o.value.stock!==void 0?(i(),d("div",Vs," åº“å­˜: "+g(o.value.stock)+"ä»¶ ",1)):$("",!0),_.value?(i(),d("div",Hs," âœ… å•†å“å·²æˆåŠŸæ·»åŠ åˆ°è´­ç‰©è½¦ï¼ ")):$("",!0)]),s("div",Ws,[(i(),d(S,null,N(h,G=>s("button",{key:G.id,class:pt(["tab-btn",{active:l.value===G.id}]),onClick:bo=>l.value=G.id},g(G.label),11,Us)),64))]),s("div",Js,[l.value==="detail"?(i(),d("div",Xs,[v[8]||(v[8]=s("h3",null,"å•†å“è¯¦æƒ…",-1)),s("p",null,g(o.value.description||o.value.desc),1),s("p",null,"è¿™æ˜¯ä¸€æ¬¾ä¼˜è´¨çš„"+g(o.value.name)+"ï¼Œä¿è¯å“è´¨ã€‚",1)])):$("",!0),l.value==="spec"?(i(),d("div",Ks,[v[14]||(v[14]=s("h3",null,"è§„æ ¼å‚æ•°",-1)),s("table",ta,[s("tr",null,[v[9]||(v[9]=s("td",{class:"spec-label"},"å•†å“åç§°",-1)),s("td",null,g(o.value.name),1)]),s("tr",null,[v[10]||(v[10]=s("td",{class:"spec-label"},"å•†å“åˆ†ç±»",-1)),s("td",null,g(It(o.value.category)||o.value.categoryName),1)]),s("tr",null,[v[11]||(v[11]=s("td",{class:"spec-label"},"ä»·æ ¼",-1)),s("td",null,"Â¥"+g((ot=o.value.price)==null?void 0:ot.toFixed(2)),1)]),s("tr",null,[v[12]||(v[12]=s("td",{class:"spec-label"},"åº“å­˜",-1)),s("td",null,g(o.value.stock||10)+"ä»¶",1)]),o.value.rating?(i(),d("tr",ea,[v[13]||(v[13]=s("td",{class:"spec-label"},"è¯„åˆ†",-1)),s("td",null,g(o.value.rating)+"åˆ†",1)])):$("",!0)])])):$("",!0),l.value==="review"?(i(),d("div",sa,[v[17]||(v[17]=s("h3",null,"ç”¨æˆ·è¯„ä»·",-1)),o.value.rating?(i(),d("div",aa,[s("div",oa,[s("span",ra,g(o.value.rating),1),v[15]||(v[15]=s("div",{class:"rating-stars"},"â˜…â˜…â˜…â˜…â˜…",-1)),v[16]||(v[16]=s("span",{class:"rating-count"},"(æš‚æ— è¯„ä»·)",-1))])])):$("",!0),v[18]||(v[18]=s("div",{class:"no-reviews"},[s("p",null,"æš‚æ— ç”¨æˆ·è¯„ä»·"),s("p",null,"æˆä¸ºç¬¬ä¸€ä¸ªè¯„ä»·æ­¤å•†å“çš„äººå§ï¼")],-1))])):$("",!0)])])):$("",!0),!u.value&&!n.value&&o.value.id?(i(),d("footer",na,[s("button",{class:"cart-btn",onClick:O,disabled:p.value},[p.value?(i(),d("span",la,"æ·»åŠ ä¸­...")):(i(),d("span",ca,"åŠ å…¥è´­ç‰©è½¦"))],8,ia),s("button",{class:"buy-btn",onClick:yt,disabled:p.value},[...v[19]||(v[19]=[s("span",null,"ç«‹å³è´­ä¹°",-1)])],8,da)])):$("",!0)])}}},it=L(ua,[["__scopeId","data-v-77f5a96c"]]),pa={class:"cart-item"},va={class:"item-image"},fa={class:"image-container"},ma=["alt"],ga={key:0,class:"loading-placeholder"},_a={class:"item-details"},ha={class:"item-name"},ya={key:0,class:"item-category"},ba={class:"item-price"},Ia={class:"quantity-control"},$a=["disabled"],ka=["value","max"],wa=["disabled"],Ca={class:"item-total"},Pa={class:"total-price"},La=V({__name:"CartItem",props:{item:{},index:{}},emits:["increase-quantity","decrease-quantity","remove-item","update-quantity"],setup(e){const t=Nt({}),a={vegetables:"è”¬èœ",fruits:"æ°´æœ",grains:"è°·ç‰©",eggs:"è›‹ç±»"},r=l=>a[l]||l,o=l=>{t[l]=!0},c=l=>{const u=l.target;u.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7lm77niYc8L3RleHQ+PC9zdmc+";const n=Object.keys(t).find(p=>t[Number(p)]===!1);n&&(t[Number(n)]=!0)};return B(()=>{}),(l,u)=>{const n=X("lazy");return i(),d("div",pa,[s("div",va,[s("div",fa,[J(s("img",{alt:e.item.name,onLoad:u[0]||(u[0]=p=>o(e.item.id)),onError:c},null,40,ma),[[n,e.item.picture]]),t[e.item.id]?$("",!0):(i(),d("div",ga))])]),s("div",_a,[s("h3",ha,g(e.item.name),1),e.item.category?(i(),d("p",ya,"åˆ†ç±»: "+g(r(e.item.category)),1)):$("",!0),s("p",ba,"å•ä»·: Â¥"+g(e.item.price.toFixed(2)),1)]),s("div",Ia,[s("button",{onClick:u[1]||(u[1]=p=>l.$emit("decrease-quantity")),disabled:e.item.quantity<=1},"-",8,$a),s("input",{type:"number",value:e.item.quantity,onInput:u[2]||(u[2]=p=>{var _,m;return l.$emit("update-quantity",parseInt((m=(_=p.target)==null?void 0:_.value)!=null?m:"0")||1)}),min:"1",max:e.item.stock||10},null,40,ka),s("button",{onClick:u[3]||(u[3]=p=>l.$emit("increase-quantity")),disabled:e.item.quantity>=(e.item.stock||10)},"+",8,wa)]),s("div",Ca,[s("p",Pa,"Â¥"+g((e.item.price*e.item.quantity).toFixed(2)),1)]),s("button",{class:"remove-btn",onClick:u[4]||(u[4]=p=>l.$emit("remove-item"))}," åˆ é™¤ ")])}}}),xa=L(La,[["__scopeId","data-v-bea1c7fd"]]),Sa={name:"CartSummary",props:{subtotal:Number,shipping:Number,discount:Number,total:Number,itemCount:Number,subtotal:{type:Number,required:!0,default:0},shipping:{type:Number,required:!0,default:0},discount:{type:Number,required:!0,default:0},total:{type:Number,required:!0,default:0}},computed:{getItemCount(){return 3}},methods:{handleCheckout(){T({message:"æ”¯ä»˜æˆåŠŸï¼",type:"success",duration:3e3,offset:100}),this.$emit("clear-cart-instant")}}},Ma={class:"cart-summary"},Ta={class:"summary-content"},Aa={class:"summary-row"},Da={class:"row-label"},Na={class:"item-count"},Ea={class:"row-value"},ja={class:"summary-row"},Oa={class:"row-label"},Ra={key:0,class:"shipping-info"},qa={key:0,class:"summary-row"},Ba={class:"row-value discount"},Ga={class:"summary-row summary-total"},Qa={class:"total-value"},Fa={key:1,class:"savings-notice"};function Za(e,t,a,r,o,c){return i(),d("div",Ma,[t[8]||(t[8]=s("div",{class:"summary-header"},[s("h3",{class:"summary-title"},"è®¢å•æ‘˜è¦"),s("div",{class:"summary-icon"},"ğŸ“‹")],-1)),s("div",Ta,[s("div",Aa,[s("div",Da,[t[2]||(t[2]=s("span",null,"å•†å“å°è®¡",-1)),s("span",Na,"("+g(c.getItemCount)+"ä»¶å•†å“)",1)]),s("span",Ea,"Â¥"+g(a.subtotal.toFixed(2)),1)]),s("div",ja,[s("div",Oa,[t[3]||(t[3]=s("span",null,"è¿è´¹",-1)),a.shipping===0?(i(),d("span",Ra,"(å…è¿è´¹)")):$("",!0)]),s("span",{class:pt(["row-value",{"free-shipping":a.shipping===0}])},g(a.shipping===0?"å…è´¹":`Â¥${a.shipping.toFixed(2)}`),3)]),a.discount>0?(i(),d("div",qa,[t[4]||(t[4]=s("div",{class:"row-label"},[s("span",null,"ä¼˜æƒ "),s("span",{class:"discount-badge"},"å·²ä¼˜æƒ ")],-1)),s("span",Ba,"-Â¥"+g(a.discount.toFixed(2)),1)])):$("",!0),t[6]||(t[6]=s("div",{class:"divider"},null,-1)),s("div",Ga,[t[5]||(t[5]=s("span",{class:"total-label"},"è®¢å•æ€»è®¡",-1)),s("span",Qa,"Â¥"+g(a.total.toFixed(2)),1)]),a.discount>0?(i(),d("div",Fa," æ‚¨å·²èŠ‚çœ Â¥"+g(a.discount.toFixed(2)),1)):$("",!0)]),s("button",{class:"checkout-btn",onClick:t[1]||(t[1]=(...l)=>c.handleCheckout&&c.handleCheckout(...l))},[s("span",{class:"btn-text",onClick:t[0]||(t[0]=(...l)=>e.clearCart&&e.clearCart(...l))},"å»ç»“ç®—"),t[7]||(t[7]=s("span",{class:"btn-arrow"},"â†’",-1))]),t[9]||(t[9]=s("div",{class:"secure-checkout"},[s("div",{class:"secure-icon"},"ğŸ”’"),s("span",null,"å®‰å…¨ç»“ç®— Â· éšç§ä¿æŠ¤")],-1))])}const za=L(Sa,[["render",Za],["__scopeId","data-v-42324b97"]]),Ya={name:"EmptyCart"},Va={class:"empty-cart"};function Ha(e,t,a,r,o,c){const l=q("router-link");return i(),d("div",Va,[t[1]||(t[1]=s("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTYgMjU2Ij48cmVjdCB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgZmlsbD0iI2Y1ZjVmNSIvPjxwYXRoIGQ9Ik0xMjgsMzJhOTYsOTYsMCwxLDAsOTYsOTZBOTYuMTEsOTYuMTEsMCwwLDAsMTI4LDMyWm0wLDE2YTgwLDgwLDAsMSwxLTgwLTgwQTgwLjA5LDgwLjA5LDAsMCwxLDEyOCw0OFoiIGZpbGw9IiNkZGQiLz48cGF0aCBkPSJNMTY4LDcySDg4YTgsOCwwLDAsMCwwLDE2aDgwYTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjxwYXRoIGQ9Ik0xNzYsMTEySDgwYTgsOCwwLDAsMCwwLDE2aDk2YTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjxwYXRoIGQ9Ik0xNjAsMTUySDk2YTgsOCwwLDAsMCwwLDE2aDY0YTgsOCwwLDAsMCwwLTE2WiIgZmlsbD0iI2RkZCIvPjwvc3ZnPg==",alt:"ç©ºè´­ç‰©è½¦"},null,-1)),t[2]||(t[2]=s("h3",null,"æ‚¨çš„è´­ç‰©è½¦æ˜¯ç©ºçš„",-1)),t[3]||(t[3]=s("p",null,"å¿«å»æŒ‘é€‰ä¸€äº›å¿ƒä»ªçš„å•†å“å§",-1)),b(l,{to:"/",class:"continue-shopping"},{default:k(()=>[...t[0]||(t[0]=[P("å‰å¾€è´­ç‰©",-1)])]),_:1})])}const Wa=L(Ya,[["render",Ha],["__scopeId","data-v-7ce95bcd"]]),Ua={id:"app"},Ja={class:"container"},Xa={class:"header"},Ka={key:0,class:"cart-stats"},to={key:0,class:"loading"},eo={key:1,class:"error"},so={key:2,class:"cart-container"},ao={class:"cart-items"},oo=V({__name:"index",setup(e){const t=W(),a=w(!1),r=w(!1),o=h=>{try{t.increaseQuantity(h)}catch(I){alert(I.message)}},c=h=>{try{t.decreaseQuantity(h)}catch(I){alert(I.message)}},l=(h,I)=>{try{t.updateQuantity(h,I)}catch(f){alert(f.message)}},u=h=>{confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ")&&t.removeFromCart(h)},n=()=>{if(t.isEmpty){alert("è´­ç‰©è½¦å·²ç»æ˜¯ç©ºçš„");return}confirm("ç¡®å®šè¦æ¸…ç©ºè´­ç‰©è½¦å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼")&&(t.clearCart(),alert("è´­ç‰©è½¦å·²æ¸…ç©º"))},p=()=>{t.clearCart()};B(()=>{a.value=!0;try{t.loadFromLocalStorage(),_()}catch(h){console.error("åŠ è½½è´­ç‰©è½¦æ•°æ®å¤±è´¥:",h),r.value=!0}finally{a.value=!1}});const _=()=>D(null,null,function*(){for(const h of t.cartItems)if(!h.picture)try{h.picture=m(h)}catch(I){console.error(`è·å–å•†å“ ${h.id} çš„å›¾ç‰‡å¤±è´¥:`,I),h.picture=m(h)}}),m=h=>{const I={vegetables:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=150",fruits:"https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?w=150",grains:"https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?w=150",eggs:"https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=150",default:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=150"};return I[h.category]||I.default};return(h,I)=>(i(),d("div",Ua,[s("div",Ja,[s("div",Xa,[a.value?$("",!0):(i(),d("div",Ka))]),a.value?(i(),d("div",to,[...I[0]||(I[0]=[s("p",null,"æ­£åœ¨åŠ è½½å•†å“ä¿¡æ¯...",-1)])])):$("",!0),r.value?(i(),d("div",eo,[...I[1]||(I[1]=[s("p",null,"åŠ è½½å•†å“ä¿¡æ¯å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•",-1)])])):$("",!0),!a.value&&!r.value&&!M(t).isEmpty?(i(),d("div",so,[s("div",{class:"cart-actions"},[s("button",{class:"clear-cart-btn",onClick:n},"æ¸…ç©ºè´­ç‰©è½¦")]),s("div",ao,[(i(!0),d(S,null,N(M(t).cartItems,(f,y)=>(i(),j(xa,{key:f.id,item:f,index:y,onIncreaseQuantity:A=>o(f.id),onDecreaseQuantity:A=>c(f.id),onRemoveItem:A=>u(f.id),onUpdateQuantity:A=>l(f.id,A)},null,8,["item","index","onIncreaseQuantity","onDecreaseQuantity","onRemoveItem","onUpdateQuantity"]))),128))]),b(za,{subtotal:M(t).subtotal,shipping:M(t).shipping,discount:M(t).discount,total:M(t).total,onClearCartInstant:p},null,8,["subtotal","shipping","discount","total"])])):$("",!0),!a.value&&!r.value&&M(t).isEmpty?(i(),j(Wa,{key:3})):$("",!0)])]))}}),ro=L(oo,[["__scopeId","data-v-ce894a28"]]),vt=Et({history:jt("/"),routes:[{path:"/",component:we,children:[{path:"",component:ys},{path:"category",component:$s},{path:"cart",component:ro},{path:"product/:id",component:it,props:!0}]},{path:"/login",component:oe},{path:"/product/:id",component:it,props:!0}]}),no=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,io=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,co=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function lo(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){uo(e);return}return t}function uo(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function po(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const a=e.trim();if(a.length<=9)switch(a.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!co.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(no.test(e)||io.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,lo)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function vo(e,t){if(e==null)return;let a=e;for(let r=0;r<t.length;r++){if(a==null||a[t[r]]==null)return;a=a[t[r]]}return a}function et(e,t,a){if(a.length===0)return t;const r=a[0];return a.length>1&&(t=et(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(a[1]))?[]:{}:e[r],t,Array.prototype.slice.call(a,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function ft(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const a={};for(const r in e)a[r]=e[r];return delete a[t[0]],a}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const a={};for(const r in e)a[r]=e[r];return a}return et(e,ft(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function mt(e,t){return t.map(a=>a.split(".")).map(a=>[a,vo(e,a)]).filter(a=>a[1]!==void 0).reduce((a,r)=>et(a,r[1],r[0]),{})}function gt(e,t){return t.map(a=>a.split(".")).reduce((a,r)=>ft(a,r),e)}function ct(e,{storage:t,serializer:a,key:r,debug:o,pick:c,omit:l,beforeHydrate:u,afterHydrate:n},p,_=!0){try{_&&(u==null||u(p));const m=t.getItem(r);if(m){const h=a.deserialize(m),I=c?mt(h,c):h,f=l?gt(I,l):I;e.$patch(f)}_&&(n==null||n(p))}catch(m){o&&console.error("[pinia-plugin-persistedstate]",m)}}function lt(e,{storage:t,serializer:a,key:r,debug:o,pick:c,omit:l}){try{const u=c?mt(e,c):e,n=l?gt(u,l):u,p=a.serialize(n);t.setItem(r,p)}catch(u){o&&console.error("[pinia-plugin-persistedstate]",u)}}function fo(e,t,a){const{pinia:r,store:o,options:{persist:c=a}}=e;if(!c)return;if(!(o.$id in r.state.value)){const n=r._s.get(o.$id.replace("__hot:",""));n&&Promise.resolve().then(()=>n.$persist());return}const u=(Array.isArray(c)?c:c===!0?[{}]:[c]).map(t);o.$hydrate=({runHooks:n=!0}={})=>{u.forEach(p=>{ct(o,p,e,n)})},o.$persist=()=>{u.forEach(n=>{lt(o.$state,n)})},u.forEach(n=>{ct(o,n,e),o.$subscribe((p,_)=>lt(_,n),{detached:!0})})}function mo(e={}){return function(t){var a;fo(t,r=>{var o,c,l,u,n,p,_;return{key:(e.key?e.key:m=>m)((o=r.key)!=null?o:t.store.$id),debug:(l=(c=r.debug)!=null?c:e.debug)!=null?l:!1,serializer:(n=(u=r.serializer)!=null?u:e.serializer)!=null?n:{serialize:m=>JSON.stringify(m),deserialize:m=>po(m)},storage:(_=(p=r.storage)!=null?p:e.storage)!=null?_:window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit}},(a=e.auto)!=null?a:!1)}}var go=mo();const Y=new Map,_o={mounted(e,t){const{value:a}=t;e.style.backgroundColor="#f5f5f5",e.style.opacity="0.7",e.style.transition="opacity 0.3s ease";const r=new IntersectionObserver(o=>{o.forEach(c=>{if(c.isIntersecting){const l=new Image;l.src=a,l.onload=()=>{e.src=a,e.style.opacity="1",e.style.backgroundColor="transparent",e.dispatchEvent(new Event("load"))},l.onerror=()=>{e.dispatchEvent(new Event("error")),e.style.opacity="1"},r.unobserve(e),Y.delete(e)}})},{rootMargin:"50px 0px",threshold:.1});r.observe(e),Y.set(e,r)},unmounted(e){const t=Y.get(e);t&&(t.unobserve(e),Y.delete(e))}},ho=e=>{e.directive("lazy",_o)},_t=Ot(),F=Rt(Wt);_t.use(go);F.use(Vt);F.use(_t);F.use(vt);ho(F);F.mount("#app")});export default yo();
